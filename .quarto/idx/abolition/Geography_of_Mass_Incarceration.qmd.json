{"title":"Prisoners of a Broken System","markdown":{"yaml":{"title":"Prisoners of a Broken System","subtitle":"Investigating the Relationship Between High Imprisonment Rates and Access to Inpatient Mental Health Care in Maryland","author":"Jamie Pantazi Esmond","date":"today","date-format":"long","bibliography":"Geography_of_Mass_Incarceration.bib","csl":"https://raw.githubusercontent.com/citation-style-language/styles/master/apa.csl","format":{"html":{"toc":true,"theme":"custom.scss","fig-cap-location":"top","tbl-cap-location":"top","title-block-banner":true,"title-block-banner-color":"#744FC6","fig-align":"center"}}},"headingText":"Introduction","containsRefs":false,"markdown":"\n\n```{r setup, echo = FALSE, include = FALSE, message = FALSE, warning = FALSE}\nknitr::opts_chunk$set(echo = FALSE, include = FALSE, message = FALSE, warning = FALSE)\n\nlibrary(tidyverse)\nlibrary(modelsummary)  \nlibrary(scales)\nlibrary(readr)\nlibrary(tufte)\nlibrary(sf) \nlibrary(broom)\nlibrary(kableExtra)\nlibrary(tinytex)\nlibrary(summarytools)\n\nMD <- readRDS(\"data/MD_GIS_02.RDS\")\nFacilities <- readRDS(\"data/Facilities_01.RDS\")\n\n```\n\n\\newpage\n\n\nWrite a catchy door-kicker! Rise of mass incarceration... [@easonMassImprisonmentRuralUrban2017]\n\nAs the Prison Industrial Complex has expanded, scholars have examined the relationship between place and imprisonment in terms of places with high rates of reported crime, places with an overwhelming police presence, and the experiences of people in those communities and their relationship with law enforcement and the greater criminal justice system. It has been well documented that people of color, especially Black men, are more likely to become involved with the carceral system in the US [@simesPunishingPlacesGeography2021; @easonMassImprisonmentRuralUrban2017; @pettitMassImprisonmentLife2004; @sharkeyStuckPlaceUrban2013]. Other than race, class is the next predominant factor that has been addressed by previous research; while race and class are inextricably intertwined, class conditions that lead to imprisonment stretch beyond the urban and racial factors usually associated with crime and subjugation [@pettitMassImprisonmentLife2004; @easonMassImprisonmentRuralUrban2017]. The removal of individuals from an already struggling community only contributes to the cycle of instability that leads to crime and harm. These individuals are fathers, workers, caregivers, and other valuable members of their community; ripping them from their families not only impacts those who may have violated the law, but those they leave behind who may have been financially or emotionally dependent on them [@gilmoreGoldenGulagPrisons2007].\n\nBy using what is already known about the disparities in crime and punishment to investigate whether imprisonment is a viable solution to the harm caused by crime, questions about the prevention of crime and the reduction of harm can be answered. What are other similarities of places with high imprisonment rates that could be addressed to reduce imprisonment and aid the reintegration of those released back to their communities? While it may be impossible to determine if the shared characteristics of these locations are the *cause* of high rates of imprisonment, the *result*, or both, it is important to assess how these characteristics illuminate a piece of the greater influence of oppressive policies that fuel the Prison Industrial Complex as a whole.\n\n## Prison Gerrymandering\n\nPrison gerrymandering is the practice of counting imprisoned people as residents of the place where they are imprisoned. The US Census defines residence as \"where they live and sleep most of the time\" [@uscensusbureau2020CensusResidence2018]. However, incarcerated people cannot vote or participate in the community where they are detained, and they often maintain ties to their community of origin and hope to have a future there when they return. The practice of counting these people as part of a community in which they have no role not only boosts representation for people around a prison but siphons resources and representation from their home communities [@benvenisteWhatPrisonGerrymandering2022]. The community conditions of places with high imprisonment rates are viewed as both the cause and the consequence of over-policing and disenfranchisement through the Prison Industrial Complex as it has expanded in the last several decades. As more people are pulled away from their homes and counted in a place that does not value their interests, the barriers to opportunity are reinforced, and the cycle of subjugation continues. If the true purpose of imprisonment is rehabilitation, and the hope upon release is to participate in society fully, the interests and opportunities of these individuals should be considered by policymakers who will impact their future opportunities for success.\n\nAs of 2021, about a dozen states had ended prison gerrymandering which would impact the redistricting from the 2020 Census [@fensterHowManyStates2021]. Because of the details involved with determining where and how to count these individuals in their home communities, data has been made available about precisely where people in prison are from, and where they intend to return to [@widraWherePeoplePrison2023]. This information is valuable and unique because it provides a link to determine the conditions that both create an environment where people feel the need to imprison larger portions of the population and create nuanced solutions to reduce both the harm that leads to imprisonment and the harm caused by it.\n\n## Mental Health, Crime, and Imprisonment\n\nMental health care is an important resource to ensure overall health and quality of life [@princeNoHealthMental2007]. The expansion of mental health care in the last few decades has been a response to a dire crisis that has long been ignored and stigmatized, and the benefits of access and awareness of mental health services are obvious to many who have utilized these services [@hortonLaunchingNewMovement2007]. Though access to mental health services is generally regarded as a positive influence on communities, the marginalized groups who often lack access to these services are the same communities who are targeted for high crime and imprisonment rates [@saxenaResourcesMentalHealth2007]. The link between access to mental health care, crime, and imprisonment is worth investigating to advocate for more resources to be made available for these communities and potentially prevent crime and harm before they happen, and as a result, reduce unnecessary imprisonment.\n\nThree major components of mental health care and its relationship with imprisonment have been discussed. The first is mental health care as prevention of criminal and violent behavior [@hodginsConsequencesConductDisorder2005; @petrasDevelopmentalEpidemiologicalCourses2008; @brennanMajorMentalDisorders2000]. Increased access to mental health care, especially on a large scale could lead to an overall reduction in violent and aggressive behavior, which comprises most of the crime residents are most concerned about.\n\nThe second component is mental health care for the residents impacted by the loss of a loved one or caretaker to imprisonment. Many people in prison are parents or otherwise supportive to other that they leave behind to serve their sentence [@wangBothSidesBars2022]. The social and economic consequences of mass imprisonment are far-reaching, and the individuals living through those consequences would certainly benefit from a support structure that values their mental health [@hatzenbuehlerCollateralDamageMass2015; @nosratiEconomicDeclineIncarceration2019].\n\nLastly, prison can have a strong psychological impact on a person, and formerly imprisoned people may bring that trauma back to their communities when they are released. People in prison more likely to suffer from a mental health issue, both because, untreated, they are more likely to be arrested and because of the trauma endured throughout their sentence [@cloudLifeSupportPublic2014; @quandtResearchRoundupIncarceration2021]. The damage of imprisonment on mental health can include family disconnection, loss of autonomy and lack of purpose, and unpredictability [@quandtResearchRoundupIncarceration2021]. Accessibility to mental health care may influence productive reintegration after release from prison.\n\nWith the new information about the home locations of imprisoned people, there are a number of relationships to investigate. The obvious demographic and economic factors should be considered and potentially controlled in many analyses. One spatial relationship that could be investigated using this data is the accessibility, in terms of distance, to mental health facilities. While there are many dimensions to the concept of accessibility, distance can be a useful indicator of at least when mental health care options are *not* available. Other dimensions to consider are the capacity of facilities, specific services provided, populations served, payment methods accepted, and outreach or awareness of services available. This analysis focuses on the dimension of physical location and proximity as an indicator of access to mental health care, specifically inpatient care for emergency situations.\n\n\\newpage\n\n# Data Origins and Background\n\nThe data for this analysis comes from four different sources combined to create a versatile basis for geographic analysis of imprisonment and its relationship with location. The imprisonment data is from Prison Policy Initiative, a non-profit organization working to \"expose the broader harm of mass criminalization\" through data and research [@prisonpolicyinitiative]. The demographic data for the same census tracts is publicly available from the US Census Bureau [@CensusBureauData2020]. Information about mental health facilities is available from the Substance Abuse and Mental Health Services Administration. Though the department provides data about many different aspects of mental health treatment and services, since this analysis is focused on the geography of imprisonment, the *2020 National Directory Of Mental Health Treatment Facilities* contains locations and key characteristics for all facilities in the US [@samhsaNationalDirectoryMental2020]. Finally, the American Community Survey hosts geographic and demographic data at the census tract level that is available publicly. This data was used to map the previous data geographically and perform spatial analysis [@esriACSContextEmergency2020].\n\n## Prison Policy Initiative\n\nThe data gathered from the Prison Policy Initiative is cross-sectional data based on data from the 2020 Census and Maryland state data. The data originated as administrative data from the Maryland Department of Public Safety and Correctional Services and was combined with population data from the Census. The Prison Policy Initiative collected, calculated, and combined this data for public use for various levels of geography for Maryland and eleven other states where prison gerrymandering has been overruled.\n\nMost of this data is from the 2020 Census. The imprisonment rate used the redistricting data from Maryland's law ending prison gerrymandering to count prisoners as residents of their home neighborhoods instead of the location of the prison. The data was compiled using the data from the Maryland Department of Public Safety and Correctional Services which provided the home addresses of imprisoned people to redistricting officials to report them to the Census so they would be recorded in their home neighborhoods and not the prison's location [@widraWherePeoplePrison2023; @RedistrictingData2020].\n\nThe original data had 1475 observations and the following 6 variables: FIPS code 2020, Maryland Census tracts, Number of people in state prison from each Census tract 2020, Census population 2020, Total population 2020, and Imprisonment rate per 100,000. The unit of observation for this analysis is the Census tract.\n\nThis data can be used to identify what characteristics are common among places with high imprisonment rates. Combined with demographic data about these locations and the proximity of mental health resources, this data can highlight areas in need of more mental health resources to reduce the harm caused by imprisonment and over-policing.\n\nThe original data is available from the Prison Policy Initiative website where the report was published. The census tract data for Maryland was copied into Excel, and the variables were renamed to be more usable in the analysis [@thejusticepolicyinstituteCensusTractAppendix2023]. The Prison Policy Initiative report provides thorough documentation of the data, its origins, and how it was processed. The variables have meaningful names, so there is no need for an official codebook.\n\nThe abolition of prison gerrymandering is still ongoing, so this data is only available in limited locations. However, it can be used to shed a light on the issue of prison gerrymandering and identify the common circumstances of places with high imprisonment rates.\n\n## US Census Data\n\nThe US Census collects cross-sectional data every ten years and makes it available publicly. Though the Census collects data about many different attributes at the individual and household level, the data for this analysis is aggregated to the census tract level. Four datasets were acquired from the online Census repository [@CensusBureauData2020]. These included the following attributes: Employment (2020) with 1475 observations and 562 variables about employment rates; Geographic Mobility (2020) with 1475 observations and 1122 variables containing general demographic information about the population of each tract along with records of what types of people moved within and from outside the county, state, and country; Median Income (2020) with 1475 observations and 483 variables about the median income in each tract for different demographic groups; and Urban and Rural (2010) with 1406 observations and 9 variables contains the number of households in rural and urban areas.\n\nIn combination with the imprisonment data, the census data can show correlations between the racial and socioeconomic characteristics of an area and the rate of imprisonment. As stated earlier, while this may not be enough to prove causation, it does describe the systematic ways that incarceration and the Prison Industrial Complex as a whole impact people of color and low-income communities disproportionately.\n\nThe data was originally downloaded from the US Census website as a compressed file with three CSV files [@CensusBureauData2020]. One file contained the data, another file contained the variable descriptions for each coded variable in the data file. The third file contained notes about the data and documentation about the methods used to collect and distribute the data. The US Census is a respected source for basic demographic information about each census tract. This is important to determine disparities in different areas that are linked to racial and socioeconomic status.\n\n## Substance Abuse and Mental Health Services Administration\n\nWithin the US Department of Health and Human Services, the Substance Abuse and Mental Health Services Administration collects and provides data about a wide array of treatments, services, and facilities for mental health and substance abuse [@samhsaSubstanceAbuseMental]. The data used for this specific analysis contains geographic and key characteristics of mental health facilities in Maryland. While some of these facilities also provide substance abuse treatment, facilities that exclusively provide substance abuse treatment are not included in this directory. The information about each facility is collected by a survey at the facility level; many data points are collected in the survey about specific treatments and capacities, but the information provided with geographic information in this directory only contained basic characteristics about the type of care, settings, operation, payments accepted, populations served, and others. Altogether, the *National Directory of Mental Health Treatment Facilities 2020* provides a code for 103 different attributes for 235 facilities in Maryland [@samhsaNationalDirectoryMental2020].\n\nThe information is provided in a PDF available to download. Since the data is not available in a format that is easily analyzed, the information needed to be extracted and separated into a readable format for analysis. Each facility is listed with a name, address, and code for each attribute associated with that facility. The directory contains a key at the beginning to interpret each code.\n\nThe locations and services provided by each facility can demonstrate how access and proximity may be related to the rate of imprisonment in a community. People in jails and prisons are more likely than the general population to suffer from a serious mental health issue, and the carceral system does the bare minimum to provide resources and health care to these individuals while they are incarcerated, let alone before and after their imprisonment [@cloudLifeSupportPublic2014]. The availability of mental health treatment, and especially inpatient treatment for individuals who may be a risk to the community, as an alternative to imprisonment has more potential to increase public safety and the well-being of communities.\n\n## American Community Survey - Context for Emergency Response\n\nThe American Community Survey (ACS) continuously collects data about many different variables to create estimates about the social, economic, and demographic characteristics of different communities. As part of the US Census, these data are available from the census bureau directly. However, for spatial analysis the ACS and Esri, a leader in geographic information system (GIS) software, host spatial data along with various attributes from the survey [@esriACSContextEmergency2020].\n\nThe Context for Emergency Response feature layer contains 1475 records for Maryland with 89 variables including the coordinates and shapes required to visually represent attributes geographically at the census tract level. Information about factors that relate to emergency response includes the amount of the population without health insurance, internet access at home, or a personal vehicle. The website hosting the data provides metadata and details about each variable available.\n\nWhile the importance of these data for this analysis is primarily spatial, the variables about some of these characteristics could be useful for further research to identify other relationships with imprisonment rates of different communities. The spatial data for the census tracts can also be used to determine the distance to different types of mental health facilities.\n\n## The Raw Data\n\nWhen acquiring observational data collected by another organization, there are limitations on what is available. Often a dataset will include many additional variables in addition to the variables required to answer a research question.\n\nThe data from the Prison Policy Initiative was already normalized and estimated in relation to population data from the Census. Because this element was already processed and calculated, there are no missing values. Several outliers exist because of extremely low populations of several census tracts, the imprisonment of only one resident shows as a high proportion when normalized at a rate per 100,000 residents.\n\nThe US Census provides hundreds of attributes at the census tract level, however, these are often raw counts of individuals or households for each category. The estimates must be divided by the total counts to calculate the percentage of the population for each census tract for equal comparison. As with many large repositories of data, these datasets are missing some values for various variables. For the useful variables missing values, they are scarce and random; the values can easily be imputed for the important variables by finding the mean within the county of the tract. While outliers may exist in some categories, none were prominent in the variables selected for analysis. The values for each variable are numbers (with the exception of the geographic identifier and the name of the tract), however, they are not always stored as numbers and will need to be properly formatted.\n\nThe data about mental health facilities came from the *National Directory of Mental Health Treatment Facilities 2020* as part of the Behavioral Health Services Information System Series [@samhsaNationalDirectoryMental2020]. Since the data is in PDF format, the information needs to be extracted and parsed into an analytic format. Each facility name is accompanied by abbreviated codes that need to be converted into dummy variables. Since this is a comprehensive list of facilities, there are no missing values. The values for facility name and address are strings and do not need to be formatted; however, the address values will be used to obtain the geographic data about their locations on a map and in relation to each census tract.\n\nThe spatial data from the ACS is available from the Living Atlas with variables for both the raw counts and the percentages for each attribute as a feature layer for use in ArcGIS Pro [@LivingAtlasWorld]. The data did contain some missing values, but only in three observations and for variables not used for this analysis. Since the data came from a curated source, it was properly formatted as the appropriate data types for both spatial and quantitative analysis.\n\n\\newpage\n\n# Getting an Analytic Dataset\n\n*Write an introduction to the processing of the data.*\n\n*Include an outline of the process including merging, cleaning, manipulating, and aggregating the data.*\n\n## Merging\n\n### Census Tracts\n\nThe imprisonment rate data was merged with several tables from the US Census. These were almost all an exact match because each Census tract has a unique identifier to link it from the data from other datesets. The exception was for the Urban and Rural data because that was only available from 2010 which had less tracts than the 2020 data. The 2010 Urban and Rural census data was joined with 2010 census tract shapefiles in ArcGIS Pro. The spatial data was then apportioned to 2020 tracts based on the area of overlap and weighted by population.\n\nAfter merging the census data with the imprisonment data, the variables with relevant values were extracted to removed unneeded information regarding annotations and margins of error. The remaining variables were renamed with more meaningful names to better reflect the meaning of the values.\n\nThe merged data from the Prison Policy Initiative and the Census were joined to the ACS tracts in ArcGIS Pro for mapping. Several variables from ACS Context for Emergency Response were added to the merged dataset including percent less than 18 years old, percent 65 Years and over, percent in dependent age groups (under 18 and 65+), percent of households with no vehicle available, percent with a disability, percent with Medicaid coverage, percent with Medicare coverage, percent with no health insurance coverage, percent without a smart phone, and percent without internet access at home. The new variables were renamed with more meaningful names to better reflect the meaning of the values.\n\n### Mental Health Facilities\n\nAfter extraction from the directory, the dummy variables for mental health facilities in Maryland were renamed with meaningful names, and the addresses for each facility were geocoded in ArcGIS Pro. The geocoded facilities were also joined the newly merged data by spatial proximity. The distance to the closest mental health facility from the edge each tract was calculated in ArcGIS Pro in feet (as the crow flies) and then converted to miles. The dummy variables for the closest facility was also added to the dataset. This process was repeated for distance to the closest inpatient mental health facility, the closest inpatient facility providing crisis intervention, and the closest inpatient facility accepting walk-ins. Using ArcGIS, the total driving distance in miles and minutes was also calculated from the geographic center of each tract to the closest facility in each of these categories.\n\nThe complete dataset includes the imprisonment rate values from the Prison Policy Initiative, the selected attributes from the various Census and ACS tables, and the name, address, and dummy variables for the the closest mental health facility, the closest inpatient facility, the closest inpatient facility with crisis intervention, and the the closest inpatient facility accepting walk-ins, along with the linear distance, driving distance, and driving time to these facilities. These facility attributes were chosen because they represent opportunities for an alternative response to a dangerous situtation that may be better resolved with mental health treatment than law enforcement and imprisonment. If individuals who are imprisoned were able to access mental health treatment, and especially inpatient treatment if they may be a threat, in a time of crisis instead of being forced into the stressful and prejudiced criminal justice system, immediate and long term harm could be avoided.\n\n## Cleaning\n\nMost of the data collected was mostly clean. A few missing values, misformatted values, and outliers needed to be dealt with. By visually analyzing the raw data, sanity checks, and validation, these issues were identified and resolved. In the imprisonment data, some of the total population values were miscalculated and were manually changed by adding the number of imprisoned individuals to the Census population values in Excel.\n\nCensus data contains many variables that describe both the attributes and the accuracy of the attribute's values. Many of these attributes were removed altogether, and for others, only the annotation variables were removed, leaving only the relevant variables. Some of the relevant variables were formatted incorrectly and needed to be converted to a numeric format. Several variables contained missing values, and these were imputed with the mean value of that variable for the tract's county. The last issue with these data was outliers. Because the imprisonment rate is calculated per 100,000 residents, census tracts with extremely low populations may have an extremely high imprisonment rate, even if only one person is from that tract. To resolve this issue, all tracts with less than 100 total population were excluded. Most of these tracts also had very little land area, and their absence should not impact the results.\n\nThe ACS data also contained some missing values, but these were not imputed because the variables are not used in this analysis. The total number of observations remaining after cleaning the data fell to 1458 census tracts from the original 1475.\n\n## Manipulating\n\nOnce the complete dataset had been merged and cleaned, some new variables were created to better represent the data for interpretation. Several of the census variables were converted from raw counts to percentages by dividing the counts by the total and multiplying by 100. These new variables include percent Black, White, and other race; the percent with no high school diploma, only a high school diploma, some college, bachelor's degree, and advanced degree (bachelor's and advanced degree was also combined to have the percent of the population with at least a bachelor's degree); percent under the poverty level; and percent of households who own and rent.\n\nSome of the new percent variables were further converted into dummy variables to represent tracts with either a majority or a value above or below the average. The Black and White ratios were converted into majority dummy variables; the same was done for the homeownership and renters variables. The percent of the tract with a bachelor's degree or higher, percent under poverty, and the unemployment rate were converted to variables to indicate if the value was above or below the mean. Each of these variables was also converted into categorical variables with descriptive labels.\n\nIn order to be able to perform analysis at the county level as well as the tract level, the county name was extracted from the tract name variable. The new variable would contain only the name of the county. Because of a formatting error with the apostrophes in some of the county names, some of the values needed to be manually cleaned in Excel.\n\n## Aggregating\n\n*Create some new variables that are common across observations. For example, if you have individual wages, you can calculate the median wage in each state and attach that value to each individual.*\n\nCounty to Tract\n\n```{r county, eval=FALSE}\n\n## Aggregate to the County Level\nMD_counties <- MD %>% \n  select(FIPS, Tract, County, Imprisonment_Rate, \n         Total_Pop1, Total_Pop18, Total_Pop25, \n         IncomeMedian, pctWhite, pctBlack, pctOther, \n         pctNoHS, pctHS, pctSomeCollege, pctBachelors, pctGradAdv, \n         pctUnderPoverty, pctOwner, pctRenter, UnempRate16) %>% \n  drop_na(Imprisonment_Rate, Total_Pop1, Total_Pop18, Total_Pop25, \n          IncomeMedian, pctWhite, pctBlack, pctOther, \n          pctNoHS, pctHS, pctSomeCollege, pctBachelors, pctGradAdv, \n          pctUnderPoverty, pctOwner, pctRenter, UnempRate16) %>% \n  group_by(County) %>% \n  summarise(Imprisonment_RateCounty = mean(Imprisonment_Rate), \n            Total_Pop18County = sum(Total_Pop18), \n            IncomeMedianCounty = mean(IncomeMedian),\n            IncomeMedianCounty = mean(IncomeMedian),\n            pctBlackCounty = mean(pctBlack),\n            pctBachelorsCounty = mean(pctBachelors),\n            pctUnderPovertyCounty = mean(pctUnderPoverty),\n            pctRenterCounty = mean(pctRenter),\n            UnempRate16County = mean(UnempRate16))\n\n  \n## Print\n# write.csv(MD_counties, \"data_counties.csv\", row.names=FALSE)\n# write.csv(MD, \"data_selected.csv\", row.names=FALSE)\n\n```\n\n\\newpage\n\n# Analysis of the Data\n\n*At this point, you should have a clean dataset, ready for analysis. In this section, you should let readers know more about your clean data through tables and figures.*\n\n*You should also show the relationship between some variables, again in tables or figures. Finally, you should run at least one regression. While you have some leeway here, you should strongly consider doing the following:*\n\n```{r map1, include = TRUE, fig.align='center', fig.cap=\"Map 1: Imprisonment Rates and Mental Health Facilities\"}\n\nknitr::include_graphics(\"Map1_FacilitiesFull.png\")\n\n```\n\n*Describe and detail your analytic dataset. How has it changed from the raw data?*\n\n## Overall\n\n*Create summary statistics of the key variables (put this in a table).*\n\n```{r summarizeMD, include = TRUE, fig.align='center'}\n\nmy_pct <- label_percent(accuracy = 0.1, scale = 1)\nmy_pct100 <- label_percent(accuracy = 1, scale = 1)\nmy_number <- label_number(accuracy = 1, big.mark = \",\")\nmy_number1 <- label_number(accuracy = .01, big.mark = \",\")\nmy_dollar <- label_number(accuracy = 1, prefix = \"$\", big.mark = \",\")\n\nMDsum <- MD %>% \n  select(Imprisonment_Rate, \n         Total_Pop, \n         IncomeMedian, \n         pctBlack, \n         pctBachelorsUp, \n         pctUnderPoverty, \n         UnempRate16,\n         pctRenter, \n         pctDisability,\n         pctMedicaid,\n         pctMedicare,\n         pctNoHI,\n         pctRural) %>% \n  descr(stats = c(\"mean\", \"med\", \"sd\", \"min\", \"max\"),\n        transpose = TRUE,\n        order = \"p\")\n\nrownames(MDsum) <- c(\"Imprisonment Rate per 100,000\",\n                    \"Total Population\",\n                    \"Median Income\",\n                    \"% Black\",\n                    \"% with Bachelor's Degree\",\n                    \"% Under Poverty Level\",\n                    \"Unemployment Rate\",\n                    \"% Renter-Occupied Housing\",\n                    \"% with Disability\",\n                    \"% with Medicaid\",\n                    \"% with Medicare\",\n                    \"% with No Health Insurance\",\n                    \"% Rural\")\n\nMDsum_tbl <- MDsum %>% \n  mutate(across(c(Mean, Median, Std.Dev, Min, Max), \n                ~ifelse(row_number() == 3, my_dollar(.),\n                        ifelse(row_number() %in% c(1,2), my_number(.), \n                               ifelse(. == 100, my_pct100(.), my_pct(.)))))) %>% \n  kable(format.args = list(scientific = FALSE),\n        caption = \"Census Tract Characteristics\",\n        row.names = TRUE,\n        align = \"c\") %>% \n  row_spec(1:2, background = \"#8DE4FF\") %>% \n  row_spec(3:13, background = \"#E8D7F1\") %>% \n  column_spec(1, width = \"12.85em\") %>% \n  column_spec(2:6, width = \"4em\")\n\n\nMDsum_tbl\n\n```\n\n```{r distance, include = TRUE, fig.align='center'}\n\nmy_number2 <- label_number(accuracy = 1, suffix = \" min\")\nmy_number3 <- label_number(accuracy = .1)\n\nmiles <- \"as the crow flies\"\n\nMD_Distance <- MD %>% \n  select(MHF_miles,\n         Total_TravelTime_MHF,\n         Driving_Miles_MHF,\n         Inpatient_miles,\n         Total_TravelTime,\n         Driving_Miles,\n         Crisis_miles,\n         Total_TravelTime_Crisis,\n         Driving_Miles_Crisis,\n         Walkin_miles,\n         Total_TravelTime_Walkin,\n         Driving_Miles_Walkin) %>% \n  descr(stats = c(\"mean\", \"med\", \"sd\", \"min\", \"max\"),\n        transpose = TRUE,\n        order = \"p\")\n\nrownames(MD_Distance) <- c(\"Miles to Mental Health Facility*\",\n                           \"Travel Time to Mental Health Facility\",\n                           \"Driving Miles to Mental Health Facility\",\n                           \"Miles to Inpatient Facility*\",\n                           \"Travel Time to Inpatient Facility\",\n                           \"Driving Miles to Inpatient Facility\",\n                           \"Miles to Inpatient Facility with Crisis Intervention*\",\n                           \"Travel Time to Inpatient Facility with Crisis Intervention\",\n                           \"Driving Miles to Inpatient Facility with Crisis Intervention\",\n                           \"Miles to Inpatient Facility accepting Walk-ins*\",\n                           \"Travel Time to Inpatient Facility accepting Walk-ins\",\n                           \"Driving Miles to Inpatient Facility accepting Walk-ins\")\n\nMD_Distance %>% \n  mutate(across(c(Mean, Median, Std.Dev, Min, Max),\n                  ~ifelse(row_number() %in% c(2,5,8,11), my_number2(.), my_number3(.)))) %>% \n  kable(digits = 2,\n        caption = \"Distance to Nearest Inpatient Facility\",\n        row.names = TRUE,\n        align = \"c\") %>% \n  row_spec(c(1,4,7,10), background = \"#90FFDC\") %>% \n  row_spec(c(2,5,8,11), background = \"#8DE4FF\") %>% \n  row_spec(c(3,6,9,12), background = \"#8AC4FF\") %>% \n  column_spec(1, width = \"16.5em\") %>% \n  column_spec(c(2,4,5), width = \"3.5em\") %>%\n  column_spec(3, width = \"4.5em\") %>%\n  column_spec(6, width = \"4em\") %>%\n  footnote(general_title = \"*\", general = miles, footnote_as_chunk = TRUE)\n\n```\n\n```{r summarizeFacilities1, include = TRUE, fig.align='center'}\n\nmy_pct1 <- label_percent(accuracy = 0.1)\nmy_pct100_2 <- label_percent(accuracy = 1)\n\nFacilities1 <- Facilities %>% \n    select(Setting_Inpatient,\n         Setting_Outpatient,\n         Setting_PartialHospital,\n         Setting_Residential,\n         Setting_Tele,\n         Age_Adults,\n         Emer_CrisisIntervention,\n         Emer_Walkins,\n         FedQualified,\n         Payment_Medicaid,\n         Payment_Medicare,\n         Payment_VA,\n         PaymentAssist_Assistance,\n         PaymentAssist_SlidingScale)\n\nmean_all <- colMeans(Facilities1)\ncount_all <- colSums(Facilities1 == 1)\n\nFacilities_inpatient <- Facilities1[Facilities1$Setting_Inpatient == 1, ]\nmean_inpatient <- colMeans(Facilities_inpatient)\ncount_inpatient <- colSums(Facilities_inpatient == 1)\n\nFacilitiesSum <- data.frame(row.names = names(mean_all))\n\nFacilitiesSum$mean_all <- mean_all\nFacilitiesSum$count_all <- count_all\nFacilitiesSum$mean_inpatient <- mean_inpatient\nFacilitiesSum$count_inpatient <- count_inpatient\n\nrownames(FacilitiesSum) <- c(\"Inpatient Services\",\n                             \"Outpatient Services\",\n                             \"Partial Hospitalization Services\",\n                             \"Residential Services\",\n                             \"Telehealth Services\",\n                             \"Serves Adults\",\n                             \"Crisis Intervention\",\n                             \"Walk-ins Accepted\",\n                             \"Federally Qualified Health Center\",\n                             \"Accepts Medicaid\",\n                             \"Accepts Medicare\",\n                             \"Accepts VA\",\n                             \"Payment Assistance\",\n                             \"Sliding Scale\")\n\ncolnames(FacilitiesSum) <- c(\"All\",\n                             \"Count All\",\n                             \"Inpatient\",\n                             \"Count\")\n\nFacilitiesSum_tbl <- FacilitiesSum %>%\n  mutate(across(c(\"All\", \"Inpatient\"), \n                ~ ifelse(. == 1, my_pct100_2(.), my_pct1(.)))) %>% \n  kable(format.args = list(scientific = FALSE),\n        caption = \"Facility Characteristics\",\n        row.names = TRUE,\n        align = \"c\") %>%\n  row_spec(1:5, background = \"#8DE4FF\") %>% \n  row_spec(6, background = \"#E8D7F1\") %>% \n  row_spec(7:8, background = \"#8AC4FF\") %>% \n  row_spec(9, background = \"#F5D7E3\") %>% \n  row_spec(10:14, background = \"#90FFDC\") %>% \n  column_spec(c(2,3,4,5), width = \"5em\") %>% \n  column_spec(3, border_right = TRUE)\n\nFacilitiesSum_tbl\n\n```\n\n*Describe other key elements to the key variables. This could be cross-tabs, figures, or charts (e.g., distribution or frequency counts of a variable). Make sure any figures are self-explanatory and include notes.*\n\n```{r histogramMD, include = TRUE, fig.align='center', fig.cap=\"Distribution of Imprisonment Rate\"}\n\nMD %>%\n  ggplot(aes(Imprisonment_Rate, fill = black_cat)) +\n    geom_histogram(color = \"blue\", binwidth = 100, boundary = 0) +\n    facet_wrap(vars(black_cat), ncol = 1, scales = \"free_y\") +\n    scale_fill_manual(values = c(\"darkblue\", \"lightblue\"), guide = \"none\") +\n    scale_x_continuous(labels = label_comma(), expand = expansion(mult = 0.01, add = 0)) +\n    labs(x = \"Imprisonment Rate per 100,000\",\n         y = \"Number of Census Tracts\",\n         caption = \"Note: 'Majority Black' rescaled to show distribution.\") +\n    theme_light() +\n    theme(panel.grid.major.x = element_line(color = \"white\"),\n          panel.grid.minor.x = element_line(color = \"white\"))\n\n```\n\n```{r histogramFacilities, include = TRUE, fig.align='center', fig.cap=\"Distribution of Inpatient Facilities\"}\n\nFacilities <- Facilities %>% \n  mutate(inpatient_cat = factor(Setting_Inpatient,\n                                labels = c(\"No Inpatient\",\n                                           \"Inpatient\")), \n         crisis_cat = factor(Emer_CrisisIntervention,\n                             labels = c(\"No Crisis Intervention\",\n                                        \"Crisis Intervention\")),\n         walkin_cat = factor(Emer_Walkins,\n                             labels = c(\"No Walk-ins Accepted\",\n                                        \"Walk-ins Accepted\")),\n         payassist_cat = factor(PaymentAssist_Assistance,\n                                labels = c(\"No Payment Assistance\",\n                                           \"Payment Assistance\")))\n\nFacilities %>%\n  filter(Setting_Inpatient == 1) %>% \n  ggplot(aes(walkin_cat, fill = payassist_cat)) +\n    geom_bar() +\n    facet_wrap(vars(crisis_cat)) +\n    scale_fill_manual(values = c(\"lightblue\",\"darkblue\"), ) +\n    scale_x_discrete(expand = expansion(mult = 0.01, add = 0)) +\n    scale_y_continuous(breaks = c(2,4,6,8,10)) +\n    labs(x = NULL,\n         y = \"Number of Facilities\",\n         fill = NULL) +\n    theme_light() +\n    theme(legend.position = \"bottom\", \n          panel.grid.major.x = element_line(color = \"white\"))\n    \n```\n\n*Run at least one regression and output the results in a table. Describe the results.*\n\n```{r regressionMD, include = TRUE, fig.align='center'}\n\nmodelIncome <- lm(Imprisonment_Rate ~ IncomeMedian1000,\n                  data = MD)\nmodelBlack <- lm(Imprisonment_Rate ~ pctBlack,\n                 data = MD)\nmodelEduc <- lm(Imprisonment_Rate ~ pctBachelorsUp,\n                data = MD)\nmodelUnemp <- lm(Imprisonment_Rate ~ UnempRate16,\n                 data = MD)\nmodelMD <- lm(Imprisonment_Rate ~ IncomeMedian1000 + pctBlack + \n              pctBachelorsUp + UnempRate16,\n                  data = MD)\n\nmy_gof <- tribble(\n  ~raw, ~clean, ~fmt,\n  \"nobs\", \"N\", 0,\n  \"r.squared\", \"R2\", 2)\n\nnotes <- c(\"t statistics in parentheses\",\n           \"(+ p < 0.1, * p < 0.05, ** p < 0.01, *** p < 0.001)\")\n\nregressMD <- modelsummary(list(\"Median Income\" = modelIncome,\n                  \"% Black\" = modelBlack,\n                  \"% w/ Degree\" = modelEduc,\n                  \"Unemployment\" = modelUnemp,\n                  \"All\" = modelMD),\n             coef_rename = c(IncomeMedian1000 = \"Median Income\",\n                             pctBlack = \"% Black\",\n                             pctBachelorsUp = \"% w/ Degree\",\n                             UnempRate16 = \"Unemployment\"),\n             output = \"kableExtra\",\n             estimate = \"{estimate}{stars}\",\n             statistic = \"statistic\",\n             fmt =  2,\n             gof_map = my_gof,\n             title = \"Demographics Regression: Maryland\") %>% \n  row_spec(c(1,3,5,7,9,11), background = \"#f7fabe\") %>% \n  column_spec(1, width = \"7em\") %>%\n  column_spec(2:6, width = \"4.5em\") %>%\n  footnote(general = notes, fixed_small_size = TRUE, footnote_as_chunk = TRUE)\n\nregressMD %>% \n  kable_styling(font_size = 10)\n\n```\n\n```{r regressionNOBmore, include = TRUE, fig.align='center'}\n\nNOBmore <- MD %>% \n  filter(County != \"Baltimore City\") %>% \n  select(FIPS, Tract, County, Imprisonment_Rate, Total_Pop, IncomeMedian,\n         IncomeMedian1000, pctWhite, pctBlack, pctBachelorsUp, \n         pctUnderPoverty, pctOwner, pctRenter, UnempRate16,\n         MHF_miles, Total_TravelTime_MHF, Driving_Miles_MHF,\n         Inpatient_miles, Total_TravelTime, Driving_Miles,\n         Crisis_miles, Total_TravelTime_Crisis, Driving_Miles_Crisis,\n         Walkin_miles, Total_TravelTime_Walkin, Driving_Miles_Walkin,\n         IH_Emer_CrisisIntervention, IH_Emer_Walkins)\n\nmodelIncomeNOBmore <- lm(Imprisonment_Rate ~ IncomeMedian1000,\n                         data = NOBmore)\nmodelBlackNOBmore <- lm(Imprisonment_Rate ~ pctBlack,\n                        data = NOBmore)\nmodelEducNOBmore <- lm(Imprisonment_Rate ~ pctBachelorsUp,\n                       data = NOBmore)\nmodelUnempNOBmore <- lm(Imprisonment_Rate ~ UnempRate16,\n                        data = NOBmore)\nmodelNOBmore <- lm(Imprisonment_Rate ~ IncomeMedian1000 + pctBlack + \n                   pctBachelorsUp + UnempRate16,\n                   data = NOBmore)\n\nregressNOBmore <- modelsummary(list(\"Median Income\" = modelIncomeNOBmore,\n                  \"% Black\" = modelBlackNOBmore,\n                  \"% w/ Degree\" = modelEducNOBmore,\n                  \"Unemployment\" = modelUnempNOBmore,\n                  \"All\" = modelNOBmore),\n             coef_rename = c(IncomeMedian1000 = \"Median Income\",\n                             pctBlack = \"% Black\",\n                             pctBachelorsUp = \"% w/ Degree\",\n                             pctRenter = \"% Renters\",\n                             UnempRate16 = \"Unemployment\"),\n             output = \"kableExtra\",\n             estimate = \"{estimate}{stars}\",\n             statistic = \"statistic\",\n             fmt =  2,\n             gof_map = my_gof,\n             title = \"Demographics Regression: Excluding Baltimore City\") %>% \n  row_spec(c(1,3,5,7,9,11), background = \"#f7fabe\") %>% \n  column_spec(1, width = \"7em\") %>%\n  column_spec(2:6, width = \"4.5em\") %>%\n  footnote(general = notes, fixed_small_size = TRUE, footnote_as_chunk = TRUE)\n\nregressNOBmore %>% \n  kable_styling(font_size = 10)\n\n```\n\n```{r regressionFacilities, include = TRUE, fig.align='center'}\n\nmodelMHF <- lm(Imprisonment_Rate ~ Driving_Miles_MHF,\n               data = MD)\nmodelIH <- lm(Imprisonment_Rate ~ Driving_Miles,\n              data = MD)\nmodelCrisis <- lm(Imprisonment_Rate ~ Driving_Miles_Crisis,\n                  data = MD)\nmodelWalkin <- lm(Imprisonment_Rate ~ Driving_Miles_Walkin,\n                  data = MD)\nmodelall <- lm(Imprisonment_Rate ~ Driving_Miles_MHF + Driving_Miles + \n               Driving_Miles_Crisis + Driving_Miles_Walkin,\n               data = MD)\n\nregressDistance <- modelsummary(list(\"Mental Health Facility\" = modelMHF,\n                  \"Inpatient Facility\" = modelIH,\n                  \"Inpatient with Crisis Intervention\" = modelCrisis,\n                  \"Inpatient accepting Walk-ins\" = modelWalkin,\n                  \"All\" = modelall),\n             coef_rename = c(Driving_Miles_MHF = \"Mental Health Facility\",\n                             Driving_Miles = \"Inpatient Facility\",\n                             Driving_Miles_Crisis = \"Inpatient with Crisis Intervention\",\n                             Driving_Miles_Walkin = \"Inpatient accepting Walk-ins\"),\n             output = \"kableExtra\",\n             estimate = \"{estimate}{stars}\",\n             statistic = \"statistic\",\n             fmt =  2,\n             gof_map = my_gof,\n             title = \"Distance to Mental Health Facilities (in Miles)\") %>% \n  row_spec(c(1,3,5,7,9,11), background = \"#f7fabe\") %>% \n  column_spec(1, width = \"9.4em\") %>%\n  column_spec(2:3, width = \"4.5em\") %>%\n  column_spec(4:5, width = \"5.35em\") %>%\n  column_spec(6, width = \"4.5em\") %>%\n  footnote(general = notes, fixed_small_size = TRUE, footnote_as_chunk = TRUE)\n\nregressDistance %>% \n  kable_styling(font_size = 10)\n\n```\n\n```{r regressionFacilitiesNOBmore, include = TRUE, fig.align='center'}\n\nmodelMHFNOBmore <- lm(Imprisonment_Rate ~ Driving_Miles_MHF,\n                      data = NOBmore)\nmodelIHNOBmore <- lm(Imprisonment_Rate ~ Driving_Miles,\n                     data = NOBmore)\nmodelCrisisNOBmore <- lm(Imprisonment_Rate ~ Driving_Miles_Crisis,\n                         data = NOBmore)\nmodelWalkinNOBmore <- lm(Imprisonment_Rate ~ Driving_Miles_Walkin,\n                         data = NOBmore)\nmodelallNOBmore <- lm(Imprisonment_Rate ~ Driving_Miles_MHF + Driving_Miles + \n                      Driving_Miles_Crisis + Driving_Miles_Walkin,\n                      data = NOBmore)\n\nregressDistanceNOBmore <- modelsummary(list(\"Mental Health Facility\" = modelMHFNOBmore,\n                                            \"Inpatient Facility\" = modelIHNOBmore,\n                                            \"Inpatient with Crisis Intervention\" = modelCrisisNOBmore,\n                                            \"Inpatient accepting Walk-ins\" = modelWalkinNOBmore,\n                                            \"All\" = modelallNOBmore),\n             coef_rename = c(Driving_Miles_MHF = \"Mental Health Facility\",\n                             Driving_Miles = \"Inpatient Facility\",\n                             Driving_Miles_Crisis = \"Inpatient with Crisis Intervention\",\n                             Driving_Miles_Walkin = \"Inpatient accepting Walk-ins\"),\n             output = \"kableExtra\",\n             estimate = \"{estimate}{stars}\",\n             statistic = \"statistic\",\n             fmt =  2,\n             gof_map = my_gof,\n             title = \"Distance to Mental Health Facilities (in Miles): Excluding Baltimore City\") %>% \n  row_spec(c(1,3,5,7,9,11), background = \"#f7fabe\") %>% \n  column_spec(1, width = \"9.4em\") %>%\n  column_spec(2:3, width = \"4.5em\") %>%\n  column_spec(4:5, width = \"5.35em\") %>%\n  column_spec(6, width = \"4.5em\") %>%\n  footnote(general = notes, fixed_small_size = TRUE, footnote_as_chunk = TRUE)\n\nregressDistanceNOBmore %>% \n  kable_styling(font_size = 10)\n\n```\n\n```{r allregression, include = TRUE, fig.align='center'}\n\nallinonemodel <- lm(Imprisonment_Rate ~ IncomeMedian1000 + pctBlack + \n                    pctBachelorsUp + UnempRate16 + Driving_Miles_MHF + \n                    Driving_Miles + Driving_Miles_Crisis + Driving_Miles_Walkin,\n                    data = MD)\n\nallinonemodelNOBmore <- lm(Imprisonment_Rate ~ IncomeMedian1000 + pctBlack + \n                           pctBachelorsUp + UnempRate16 + Driving_Miles_MHF + \n                           Driving_Miles + Driving_Miles_Crisis + Driving_Miles_Walkin,\n                           data = NOBmore)\n\nallinone <- modelsummary(list(\"Maryland\" = modelMD,\n                  \"Maryland w/o Baltimore\" = modelNOBmore,\n                  \"Distance\" = modelall,\n                  \"Distance w/o Baltimore\" = modelallNOBmore,\n                  \"All Factors\" = allinonemodel,\n                  \"All Factors w/o Baltimore\" = allinonemodelNOBmore),\n             coef_rename = c(IncomeMedian1000 = \"Median Income\",\n                             pctBlack = \"% Black\",\n                             pctBachelorsUp = \"% w/ Degree\",\n                             UnempRate16 = \"Unemployment\",\n                             Driving_Miles_MHF = \"Mental Health Distance\",\n                             Driving_Miles = \"Inpatient Distance\",\n                             Driving_Miles_Crisis = \"Inpatient with Crisis Intervention Distance\",\n                             Driving_Miles_Walkin = \"Inpatient accepting Walk-ins Distance\"),\n             output = \"kableExtra\",\n             estimate = \"{estimate}{stars}\",\n             statistic = \"statistic\",\n             fmt =  2,\n             gof_map = my_gof,\n             title = \"All Regressions\") %>% \n  row_spec(c(1,3,5,7,9,11,13,15,17,19), \n           background = \"#f7fabe\") %>% \n  column_spec(1, width = \"10em\") %>%\n  column_spec(c(2:7), width = \"4.35em\") %>%\n  footnote(general = notes, fixed_small_size = TRUE, footnote_as_chunk = TRUE)\n\nallinone %>% \n  kable_styling(font_size = 10)\n\n```\n\n*What are the key relationships/associations among various variables that you can identify in your dataset?*\n\n*What questions can you answer with your dataset?*\n\n*Do you find strong correlations between variables that you expected or did not expect?*\n\n*You should present some of these results in tables and figures.*\n\n## Race and Income\n\nExpected results. Strong correlation between both race and income with imprisonment as well as a strong correlation between race and income themselves. Income as a factor in rural areas that are not majority white and how economic indicators are related to imprisonment and criminal behavior.\n\n```{r Race, include = TRUE, fig.align='center', fig.cap=\"Income, Race, and Imprisonment Rate\"}\n\nMD %>% \n  drop_na(IncomeMedian, pctBlack) %>% \n  ggplot(aes(IncomeMedian, Imprisonment_Rate, color = pctBlack)) +\n    geom_point() + \n    geom_smooth(color = \"black\") +\n    labs(x = \"Median Income by Census Tract\",\n         y = \"Imprisonment Rate (per 100,000)\",\n         title = \"Income and Imprisonment Rate\",\n         color = \"% Black\") +\n    scale_x_continuous(labels = dollar) +\n    scale_y_continuous(labels = comma) +\n    scale_color_distiller(type = \"seq\", \n                          palette = \"Purples\",\n                          direction = 1,\n                          labels = label_percent(scale = 1)) +\n    theme_light() +\n    theme(legend.position = \"bottom\",\n          panel.grid.major.x = element_line(color = \"white\"),\n          panel.grid.minor.x = element_line(color = \"white\"),\n          panel.grid.major.y = element_line(color = \"lightgrey\"),\n          panel.grid.minor.y = element_line(color = \"white\"))\n\n\n```\n\n```{r NOBmoreRace, include = TRUE, fig.align='center', fig.cap=\"Income, Race, and Imprisonment Rate: Excluding Baltimore\"}\n\nNOBmore %>% \n  ggplot(aes(IncomeMedian, Imprisonment_Rate, color = pctBlack)) +\n    geom_point() + \n    geom_smooth(color = \"black\") +\n    labs(x = \"Median Income by Census Tract\",\n         y = \"Imprisonment Rate (per 100,000)\",\n         title = \"Income and Imprisonment Rate\",\n         color = \"% Black\") +\n    scale_x_continuous(labels = dollar) +\n    scale_y_continuous(labels = comma) +\n    scale_color_distiller(type = \"seq\", \n                          palette = \"Purples\",\n                          direction = 1,\n                          labels = label_percent(scale = 1)) +\n    theme_light() +\n    theme(legend.position = \"bottom\",\n          panel.grid.major.x = element_line(color = \"white\"),\n          panel.grid.minor.x = element_line(color = \"white\"),\n          panel.grid.major.y = element_line(color = \"lightgrey\"),\n          panel.grid.minor.y = element_line(color = \"white\"))\n\n```\n\n## Unemployment and Education\n\nExpected results, however, these indicators are targetable. Employment and educational opportunities can be influenced by policy to target these communities to reduce the incentive and necessity of criminal behavior and give surviors of violence the opportunity to escape, heal, and end the cycle of violence.\n\n```{r Unemployment, include = TRUE, fig.align='center', fig.cap=\"Income, Unemployment, and Imprisonment Rate\"}\n\nMD %>% \n  drop_na(IncomeMedian, UnempRate16) %>% \n  mutate(UnempRate16 = UnempRate16 / 100) %>% \n  ggplot(aes(IncomeMedian, Imprisonment_Rate, color = UnempRate16)) +\n    geom_point() + \n    labs(x = \"Median Income by Census Tract\",\n         y = \"Imprisonment Rate (per 100,000)\",\n         title = \"Income and Imprisonment Rate\",\n         color = \"Unemployment\") +\n    scale_x_continuous(labels = dollar) +\n    scale_y_continuous(labels = comma) +\n    scale_color_distiller(type = \"seq\", \n                          palette = \"Greens\",\n                          direction = 1,\n                          labels = label_percent(scale = 100)) +\n    theme_light() +\n    theme(legend.position = \"right\",\n          panel.grid.major.x = element_line(color = \"white\"),\n          panel.grid.minor.x = element_line(color = \"white\"),\n          panel.grid.major.y = element_line(color = \"lightgrey\"),\n          panel.grid.minor.y = element_line(color = \"white\"))\n\n```\n\n```{r Education, include = TRUE, fig.align='center', fig.cap=\"Income, Education, and Imprisonment Rate\"}\n\nMD %>% \n  drop_na(IncomeMedian, pctBachelorsUp) %>% \n  ggplot(aes(IncomeMedian, Imprisonment_Rate, color = pctBachelorsUp)) +\n    geom_point() + \n    labs(x = \"Median Income by Census Tract\",\n         y = \"Imprisonment Rate (per 100,000)\",\n         title = \"Income and Imprisonment Rate\",\n         color = \"% w/ Degree\") +\n    scale_x_continuous(labels = dollar) +\n    scale_y_continuous(labels = comma) +\n    scale_color_distiller(type = \"seq\", \n                          palette = \"Blues\",\n                          direction = 1,\n                          labels = label_percent(scale = 1)) +\n    theme_light() +\n    theme(legend.position = \"right\",\n          panel.grid.major.x = element_line(color = \"white\"),\n          panel.grid.minor.x = element_line(color = \"white\"),\n          panel.grid.major.y = element_line(color = \"lightgrey\"),\n          panel.grid.minor.y = element_line(color = \"white\"))\n\n```\n\n## Access to Mental Health Care\n\nWhile only significant when excluding Baltimore city, proximity to mental health care can not only prevent harmful criminal behavior, it can serve as alternative for dangerous situations before they become criminal. Mental health accessibility is also important for formerly incarcerated people returning to their communities to heal from the trauma of imprisonment and become capable of reintegrating and supporting their community.\n\nWhile Baltimore has the highest concentration of imprisonment and proximity to inpatient mental health facilities, there are only four facilities in Baltimore city. Though the exact capacity of these facilities is unknown, the average inpatient capacity for inpatient facilities is \\[xxx\\], which is not likely to be sufficient to provide the necessary services for all those in Baltimore who would benefit. In addition to other barriers, such as health insurance coverage and transportation to facilities, more research is needed to assess the most effective expansion of service to target the neighborhood most in need.\n\n```{r map2, include = TRUE, fig.align='center', fig.cap=\"Map 2: Distance to Inpatient Facilities with Crisis Intervention\"}\n\nknitr::include_graphics(\"Map2_CrisisFull.png\")\n\n```\n\n```{r MHF, include = TRUE, fig.align='center', fig.cap=\"Inpatient Accessibility\"}\n\nMD %>%  \n  mutate(IH_Emer_Crisis_cat = factor(IH_Emer_CrisisIntervention, \n                                     labels = c(\"No Crisis Intervention\", \n                                                \"Crisis Intervention\"))) %>% \n  ggplot(aes(Driving_Miles, Imprisonment_Rate)) +\n    geom_point(aes(fill = IH_Emer_Crisis_cat), color = \"navy\", pch=21, size=2) + \n    geom_smooth(color = \"black\") +\n    labs(x = \"Driving Miles to Nearest Inpatient Facility\",\n         y = \"Imprisonment Rate (per 100,000)\",\n         title = \"Inpatient Accessibility\",\n         fill = NULL) +\n    scale_x_continuous() +\n    scale_fill_manual(values = c(\"#F5D7E3\",\"#90FFDC\")) +\n    theme_light() +\n    theme(legend.position = \"bottom\",\n          panel.grid.major.x = element_line(color = \"white\"),\n          panel.grid.minor.x = element_line(color = \"white\"),\n          panel.grid.major.y = element_line(color = \"lightgrey\"),\n          panel.grid.minor.y = element_line(color = \"white\"))\n\n```\n\n```{r MHFNOBmore, include = TRUE, fig.align='center', fig.cap=\"Inpatient Accessibility: Excluding Baltimore City\"}\n\nNOBmore %>%  \n  mutate(IH_Emer_Crisis_cat = factor(IH_Emer_CrisisIntervention, \n                                     labels = c(\"No Crisis Intervention\", \n                                                \"Crisis Intervention\"))) %>% \n  ggplot(aes(Driving_Miles, Imprisonment_Rate)) +\n    geom_point(aes(fill = IH_Emer_Crisis_cat), color = \"navy\", pch=21, size=2) + \n    geom_smooth(color = \"black\") +\n    labs(x = \"Driving Miles to Nearest Inpatient Facility\",\n         y = \"Imprisonment Rate (per 100,000)\",\n         title = \"Inpatient Accessibility\",\n         fill = NULL) +\n    scale_x_continuous() +\n    scale_fill_manual(values = c(\"#F5D7E3\",\"#90FFDC\")) +\n    theme_light() +\n    theme(legend.position = \"bottom\",\n          panel.grid.major.x = element_line(color = \"white\"),\n          panel.grid.minor.x = element_line(color = \"white\"),\n          panel.grid.major.y = element_line(color = \"lightgrey\"),\n          panel.grid.minor.y = element_line(color = \"white\"))\n\n```\n\n\\newpage\n\n# Discussion and Conclusion\n\nDiscuss limitations, further research, and policy implications.\n\n## Limitations\n\nData needed about capacity --- Four inpatient facilities may be in close proximity to Baltimore residents, but capacity may be the issue in urban areas.\n\n## Further Research\n\nLack of health insurance for formerly imprisoned residents as a barrier to access mental health care.\n\n### Datasets:\n\n-   Maryland tracts with nearest facilities and **all** characteristics\n-   Maryland tracts with nearest facilities and **select** characteristics\n-   Maryland facilities list with **all** characteristics\n\n## Policy Implications\n\nFunding emergency mental health care to divert people in need of health care away from the carceral system both through prevention and treatment.\n\nMany violent conflicts require de-escalation and treatment, not confinement.\n\nFunding and supporting mental health care accessibility can enable people to receive the health care and resources they need instead of becoming entrenched in the endless cycle of incarceration and harm from the Prison Industrial Complex and all its extremities.\n\n\\newpage\n\n# Appendix\n\n## R Code\n\n```{r code, echo = TRUE, include = TRUE, eval = FALSE}\n\nlibrary(tidyverse)\nlibrary(modelsummary)  \nlibrary(scales)\nlibrary(readr)\nlibrary(tufte)\nlibrary(sf) \nlibrary(broom)\nlibrary(kableExtra)\nlibrary(tinytex)\nlibrary(mice)\nlibrary(lattice)\n\n## Load Census Data\nGEOGRAPHIC_MOBILITY <- read_csv(\"data/GEOGRAPHIC_MOBILITY.csv\")\nEMPLOYMENT <- read_csv(\"data/EMPLOYMENT.csv\")\nMEDIAN_INCOME <- read_csv(\"data/MEDIAN_INCOME.csv\")\n\n## Load Imprisonment Data\nImprisonment_rates <- read_csv(\"data/Imprisonment_rates.csv\")\n\n## Extract FIPS codes\nGEOGRAPHIC_MOBILITY$FIPS <- substr(GEOGRAPHIC_MOBILITY$GEO_ID, \n                                   nchar(GEOGRAPHIC_MOBILITY$GEO_ID) - 10, \n                                   nchar(GEOGRAPHIC_MOBILITY$GEO_ID))\n\nEMPLOYMENT$FIPS <- substr(EMPLOYMENT$GEO_ID, \n                          nchar(EMPLOYMENT$GEO_ID) - 10, \n                          nchar(EMPLOYMENT$GEO_ID))\n\nMEDIAN_INCOME$FIPS <- substr(MEDIAN_INCOME$GEO_ID, \n                             nchar(MEDIAN_INCOME$GEO_ID) - 10, \n                             nchar(MEDIAN_INCOME$GEO_ID))\n\n## Joining\ndata1 <- merge(Imprisonment_rates, GEOGRAPHIC_MOBILITY, by = \"FIPS\")\ndata1 <- data1 %>% \n  merge(EMPLOYMENT, by = \"FIPS\") %>% \n  merge(MEDIAN_INCOME, by = \"FIPS\")\n\n## Select Estimates Columns\ndata_all <- select(data1, \"FIPS\", \n                   \"Tract\", \n                   \"State_Prison_Num\", \n                   \"Census_Pop\",\t\n                   \"Total_Pop\",\n                   \"Imprisonment_Rate\", \n                   ends_with('E'))\n\n## Renaming\ndata_all <- data_all %>% \n  rename(\"Total_Pop1\" = \"S0701_C01_001E\",\n         \"Total_Pop18_24\" = \"S0701_C01_004E\",\n         \"Total_Pop25_34\" = \"S0701_C01_005E\",\n         \"Total_Pop35_44\" = \"S0701_C01_006E\",\n         \"Total_Pop45_54\" = \"S0701_C01_007E\",\n         \"Total_Pop55_64\" = \"S0701_C01_008E\",\n         \"Total_Pop65_74\" = \"S0701_C01_009E\",\n         \"Total_Pop75\" = \"S0701_C01_010E\",\n         \"MedianAge\" = \"S0701_C01_011E\",\n         \"Male\" = \"S0701_C01_012E\",\n         \"Female\" = \"S0701_C01_013E\",\n         \"OneRaceTotal\" = \"S0701_C01_014E\",\n         \"White\" = \"S0701_C01_015E\",\n         \"Black\" = \"S0701_C01_016E\",\n         \"AIAN\" = \"S0701_C01_017E\",\n         \"Asian\" = \"S0701_C01_018E\",\n         \"NHPI\" = \"S0701_C01_019E\",\n         \"Other\" = \"S0701_C01_020E\",\n         \"TwoRaces\" = \"S0701_C01_021E\",\n         \"Latinx\" = \"S0701_C01_022E\",\n         \"WhiteNonLatinx\" = \"S0701_C01_023E\",\n         \"Total_Pop25\" = \"S0701_C01_033E\",\n         \"NoHS\" = \"S0701_C01_034E\",\n         \"HS\" = \"S0701_C01_035E\",\n         \"SomeCollege\" = \"S0701_C01_036E\",\n         \"Bachelors\" = \"S0701_C01_037E\",\n         \"GradAdv\" = \"S0701_C01_038E\",\n         \"PovStatusDeterminedTotal\" = \"S0701_C01_049E\",\n         \"Under100PovLevel\" = \"S0701_C01_050E\",\n         \"100_149PovLevel\" = \"S0701_C01_051E\",\n         \"150PlusPovLevel\" = \"S0701_C01_052E\",\n         \"Housed\" = \"S0701_C01_053E\",\n         \"HousedOwner\" = \"S0701_C01_054E\",\n         \"HousedRenter\" = \"S0701_C01_055E\",\n         \n         \"UnempRate16\" = \"S2301_C04_001E\",\n         \n         \"IncomeMedian\" = \"S1903_C03_001E\",\n         \"IncomeMedianWhite\" = \"S1903_C03_002E\",\n         \"IncomeMedianBlack\" = \"S1903_C03_003E\")\n\n## Cleaning\nclean <- data_all %>% \n  select(-grep(\"_C0\", names(data_all)))\n\nclean1 <- clean %>%\n  select(-Tract) %>% \n  mutate_all(as.numeric)\n\nMD <- clean %>% \n  select(FIPS, Tract) %>% \n  merge(clean1, by = \"FIPS\")\n\n## Extract County Column\nMD$County <- substr(MD$Tract,1,regexpr(\",\",MD$Tract)-1)\nMD$County <- gsub(\" County\", \"\", MD$County)\n\n## Calculate Percentages\nMD_ <- MD %>% \n  mutate(Total_Pop18 = Total_Pop18_24 + Total_Pop25_34 + \n           Total_Pop35_44 + Total_Pop45_54 + Total_Pop55_64 + \n           Total_Pop65_74 + Total_Pop75,\n         pctWhite = (White / OneRaceTotal) * 100, \n         pctBlack = (Black / OneRaceTotal) * 100, \n         pctOther = ((AIAN + Asian + NHPI + Other) / OneRaceTotal) * 100,\n         pctNoHS = (NoHS / Total_Pop25) * 100,\n         pctHS = (HS / Total_Pop25) * 100,\n         pctSomeCollege = (SomeCollege / Total_Pop25) * 100,\n         pctBachelors = (Bachelors / Total_Pop25) * 100,\n         pctGradAdv = (GradAdv / Total_Pop25) * 100,\n         pctBachelorsUp = ((Bachelors / Total_Pop25) + (GradAdv / Total_Pop25)) * 100,\n         pctUnderPoverty = (Under100PovLevel / PovStatusDeterminedTotal) * 100,\n         pctOwner = (HousedOwner / Housed) * 100,\n         pctRenter = (HousedRenter / Housed) * 100)\n\n## Print\n# write.csv(MD_, \"data/data.csv\", row.names=FALSE)\n\n## Manually fix County values in Excel and reload\nMD_ <- read_csv(\"data/data.csv\")\n\n## Save data\nsaveRDS(MD_, file = \"data/MD_01.RDS\")\n\n\nMD_ <- readRDS(\"data/MD_01.RDS\")\n\n## Drop Tracts with a population below 100 to reduce outliers.\nMD <- MD_ %>% \n  filter(Total_Pop >= 100)\n\n## Select Columns\nMD <- MD %>% \n  select(FIPS, Tract, County, Imprisonment_Rate, Total_Pop, \n         IncomeMedian, pctWhite, pctBlack, pctBachelorsUp, \n         pctUnderPoverty, pctOwner, pctRenter, UnempRate16)\n\n## Aggregate to the County Level\nMD_counties <- MD %>% \n  select(FIPS, Tract, County, Imprisonment_Rate, Total_Pop,\n         IncomeMedian, pctWhite, pctBlack, pctBachelorsUp, \n         pctUnderPoverty, pctOwner, pctRenter, UnempRate16) %>% \n  drop_na(FIPS, Tract, County, Imprisonment_Rate, Total_Pop,\n          IncomeMedian, pctWhite, pctBlack, pctBachelorsUp, \n          pctUnderPoverty, pctOwner, pctRenter, UnempRate16) %>% \n  group_by(County) %>% \n  summarise(Imprisonment_RateCounty = mean(Imprisonment_Rate), \n            Total_PopCounty = sum(Total_Pop), \n            IncomeMedianCounty = mean(IncomeMedian),\n            pctWhiteCounty = mean(pctWhite),\n            pctBlackCounty = mean(pctBlack),\n            pctBachelorsUpCounty = mean(pctBachelorsUp),\n            pctUnderPovertyCounty = mean(pctUnderPoverty),\n            pctOwnerCounty = mean(pctOwner),\n            pctRenterCounty = mean(pctRenter),\n            UnempRate16County = mean(UnempRate16))\n\n## Make dummys for missings\nMD <- MD %>% \n  mutate(missing = is.na(MD$IncomeMedian))\n\n## Add County level values to tract data and replace NAs with the county mean\nMD <- MD %>% \n  merge(MD_counties, by = \"County\") \n\nMD$IncomeMedian <- ifelse(is.na(MD$IncomeMedian), \n                           MD$IncomeMedianCounty, \n                           MD$IncomeMedian)\n\nMD$pctUnderPoverty <- ifelse(is.na(MD$pctUnderPoverty), \n                              MD$pctUnderPovertyCounty, \n                              MD$pctUnderPoverty)\n\nMD$pctRenter <- ifelse(is.na(MD$pctRenter), \n                        MD$pctRenterCounty, \n                        MD$pctRenter)\n\nMD$pctOwner <- ifelse(is.na(MD$pctOwner), \n                       MD$pctOwnerCounty, \n                       MD$pctOwner)\n\nMD$UnempRate16 <- ifelse(is.na(MD$UnempRate16), \n                          MD$UnempRate16County, \n                          MD$UnempRate16)\n\n## Create dummy variables\nMD <- MD %>% \n  mutate(white = case_when(pctWhite > 50 ~ 1, pctWhite <= 50 ~ 0),\n         black = case_when(pctBlack > 50 ~ 1, pctBlack <= 50 ~ 0),\n         bachelorsUp = case_when(pctBachelorsUp > mean(pctBachelorsUp) ~ 1, \n                                 pctBachelorsUp <= mean(pctBachelorsUp) ~ 0),\n         poverty = case_when(pctUnderPoverty > mean(pctUnderPoverty) ~ 1, \n                             pctUnderPoverty <= mean(pctUnderPoverty) ~ 0),\n         owner = case_when(pctOwner > 50 ~ 1, pctOwner <= 50 ~ 0),\n         renter = case_when(pctRenter > 50 ~ 1, pctRenter <= 50 ~ 0),\n         unemp = case_when(UnempRate16 > mean(UnempRate16) ~ 1, \n                           UnempRate16 <= mean(UnempRate16) ~ 0)) %>% \n  mutate(black_cat = factor(black, labels = c(\"Not Majority Black\", \n                                              \"Majority Black\")),\n         white_cat = factor(white, labels = c(\"Not Majority White\", \n                                              \"Majority White\")),\n         bachelors_cat = factor(bachelorsUp, \n                                labels = c(\"Percent with Bachelor's Dergree or Higher Below Average\", \n                                           \"Percent with Bachelor's Dergree or Higher Above Average\")),\n         poverty_cat = factor(poverty, \n                              labels = c(\"Percent Under Poverty Level Below Average\", \n                                         \"Percent Under Poverty Level Above Average\")),\n         owner_cat = factor(owner, labels = c(\"Not Majority Homeowner\", \n                                              \"Majority Homeowner\")),\n         renter_cat = factor(renter, labels = c(\"Not Majority Renter\", \n                                                \"Majority Renter\")),\n         bachelors_cat = factor(bachelorsUp, \n                                labels = c(\"Percent with Unemployment Below Average\", \n                                           \"Percent with Unemployment Above Average\")))\n\n## Print\nwrite.csv(MD_counties, \"data/MD_counties.csv\", row.names=FALSE)\nwrite.csv(MD, \"data/MD.csv\", row.names=FALSE)\n\n## Save data\nsaveRDS(MD, file = \"data/MD_02.RDS\")\nsaveRDS(MD_counties, file = \"data/MD_counties_01.RDS\")\n\n\n## Extract facilities data from PDF.\n## Parse data to create a dataset with facility name, address, \n##   and services in Excel.\n## Rename facilities variables.\n## Geocode facilities data in ArcGIS Pro.\n## \n## Join MD.csv to ACS tracts in ArcGIS for mapping.\n## Join geocoded facilities with joined MD.csv and ACS tracts in ArcGIS Pro.\n## \n## Calculate the distance to mental health facilities in ArcGIS Pro, and\n##   then convert to miles.\n## Calculate the distance to inpatient mental health facilities in ArcGIS\n##   Pro, and then convert to miles.\n## Calculate the distance to inpatient mental health facilities with Crisis \n##   Intervention in ArcGIS Pro, and then convert to miles.\n## Calculate the distance to inpatient mental health facilities accepting  \n##   Walk-ins in ArcGIS Pro, and then convert to miles.\n##\n## Join 2010 Urban/Rural census data with 2010 ACS tract shapefiles in\n##   ArcGIS Pro.\n## Apportion 2010 census tracts to 2020 tracts in ArcGIS Pro.\n## \n\n## Load Facilities Data\nMD_GIS <- read_csv(\"data/MD_GIS.csv\")\n\n## Rename Facilities Variables\nMD_GIS <- MD_GIS %>% \n  select(FIPS,\n         County,\n         Tract,\n         Imprisonment_Rate,\n         Total_Pop,\n         IncomeMedian,\n         pctWhite,\n         pctBlack,\n         pctBachelorsUp,\n         pctUnderPoverty,\n         pctOwner,\n         pctRenter,\n         UnempRate16,\n         B01001_calc_pctLT18E,\n         B01001_calc_pctGE65E,\n         B01001_calc_pctDependE,\n         B08201_calc_pctNoVehE,\n         B18101_calc_pctDE,\n         B27010_calc_pctMcdE,\n         B27010_calc_pctMcrE,\n         B27010_calc_pctNoInsE,\n         B28001_calc_pctNoSPE,\n         B28002_calc_pctNoIntE,\n         pctRural,\n         missing,\n         Imprisonment_RateCounty,\n         Total_PopCounty,\n         IncomeMedianCounty,\n         pctWhiteCounty,\n         pctBlackCounty,\n         pctBachelorsUpCounty,\n         pctUnderPovertyCounty,\n         pctOwnerCounty,\n         pctRenterCounty,\n         UnempRate16County,\n         white,\n         black,\n         bachelorsUp,\n         poverty,\n         owner,\n         renter,\n         unemp,\n         black_cat,\n         white_cat,\n         bachelors_cat,\n         poverty_cat,\n         owner_cat,\n         renter_cat,\n         USER_FacilityName,\n         USER_Setting_Inpatient,\n         USER_Setting_Outpatient,\n         USER_Setting_PartialHospital,\n         USER_Setting_Residential,\n         USER_Setting_Tele,\n         USER_Emer_CrisisIntervention,\n         USER_Emer_Walkins,\n         USER_FedQualified,\n         USER_Payment_Medicaid,\n         USER_Payment_Medicare,\n         USER_Payment_VA,\n         USER_PaymentAssist_Assistance,\n         USER_PaymentAssist_SlidingScale,\n         USER_Age_Adults,\n         MHF_miles,\n         \n         USER_FacilityName_1,\n         USER_Setting_Inpatient_1,\n         USER_Setting_Outpatient_1,\n         USER_Setting_PartialHospital_1,\n         USER_Setting_Residential_1,\n         USER_Setting_Tele_1,\n         USER_Emer_CrisisIntervention_1,\n         USER_Emer_Walkins_1,\n         USER_FedQualified_1,\n         USER_Payment_Medicaid_1,\n         USER_Payment_Medicare_1,\n         USER_Payment_VA_1,\n         USER_PaymentAssist_Assistance_1,\n         USER_PaymentAssist_SlidingScale_1,\n         USER_Age_Adults_1,\n         Inpatient_miles,\n         \n         USER_FacilityName_12,\n         USER_Setting_Inpatient_12,\n         USER_Setting_Outpatient_12,\n         USER_Setting_PartialHospital_12,\n         USER_Setting_Residential_12,\n         USER_Setting_Tele_12,\n         USER_Emer_CrisisIntervention_12,\n         USER_Emer_Walkins_12,\n         USER_FedQualified_12,\n         USER_Payment_Medicaid_12,\n         USER_Payment_Medicare_12,\n         USER_Payment_VA_12,\n         USER_PaymentAssist_Assistance_12,\n         USER_PaymentAssist_SlidingScale_12,\n         USER_Age_Adults_12,\n         Crisis_miles,\n         \n         USER_FacilityName_12_13,\n         USER_Setting_Inpatient_12_13,\n         USER_Setting_Outpatient_12_13,\n         USER_Setting_PartialHospital_12_13,\n         USER_Setting_Residential_12_13,\n         USER_Setting_Tele_12_13,\n         USER_Emer_CrisisIntervention_12_13,\n         USER_Emer_Walkins_12_13,\n         USER_FedQualified_12_13,\n         USER_Payment_Medicaid_12_13,\n         USER_Payment_Medicare_12_13,\n         USER_Payment_VA_12_13,\n         USER_PaymentAssist_Assistance_12_13,\n         USER_PaymentAssist_SlidingScale_12_13,\n         USER_Age_Adults_12_13,\n         Walkin_miles) %>% \n  rename(\"pctUnder18\" = \"B01001_calc_pctLT18E\",\n         \"pctOver65\" = \"B01001_calc_pctGE65E\",\n         \"pctDepend\" = \"B01001_calc_pctDependE\",\n         \"pctNoVeh\" = \"B08201_calc_pctNoVehE\",\n         \"pctDisability\" = \"B18101_calc_pctDE\",\n         \"pctMedicaid\" = \"B27010_calc_pctMcdE\",\n         \"pctMedicare\" = \"B27010_calc_pctMcrE\",\n         \"pctNoHI\" = \"B27010_calc_pctNoInsE\",\n         \"pctNoSP\" = \"B28001_calc_pctNoSPE\",\n         \"pctNoInternet\" = \"B28002_calc_pctNoIntE\",\n         \n         \"FacilityName\" = \"USER_FacilityName\",\n         \"Setting_Inpatient\" = \"USER_Setting_Inpatient\",\n         \"Setting_Outpatient\" = \"USER_Setting_Outpatient\",\n         \"Setting_PartialHospital\" = \"USER_Setting_PartialHospital\",\n         \"Setting_Residential\" = \"USER_Setting_Residential\",\n         \"Setting_Tele\" = \"USER_Setting_Tele\",\n         \"Emer_CrisisIntervention\" = \"USER_Emer_CrisisIntervention\",\n         \"Emer_Walkins\" = \"USER_Emer_Walkins\",\n         \"Payment_Medicaid\" = \"USER_Payment_Medicaid\",\n         \"Payment_Medicare\" = \"USER_Payment_Medicare\",\n         \"Payment_VA\" = \"USER_Payment_VA\",\n         \"PaymentAssist_Assistance\" = \"USER_PaymentAssist_Assistance\",\n         \"PaymentAssist_SlidingScale\" = \"USER_PaymentAssist_SlidingScale\",\n         \"Age_Adults\" = \"USER_Age_Adults\",\n         \"FedQualified\" = \"USER_FedQualified\",\n         \n         \"IH_FacilityName\" = \"USER_FacilityName_1\",\n         \"IH_Setting_Inpatient\" = \"USER_Setting_Inpatient_1\",\n         \"IH_Setting_Outpatient\" = \"USER_Setting_Outpatient_1\",\n         \"IH_Setting_PartialHospital\" = \"USER_Setting_PartialHospital_1\",\n         \"IH_Setting_Residential\" = \"USER_Setting_Residential_1\",\n         \"IH_Setting_Tele\" = \"USER_Setting_Tele_1\",\n         \"IH_Emer_CrisisIntervention\" = \"USER_Emer_CrisisIntervention_1\",\n         \"IH_Emer_Walkins\" = \"USER_Emer_Walkins_1\",\n         \"IH_Payment_Medicaid\" = \"USER_Payment_Medicaid_1\",\n         \"IH_Payment_Medicare\" = \"USER_Payment_Medicare_1\",\n         \"IH_Payment_VA\" = \"USER_Payment_VA_1\",\n         \"IH_PaymentAssist_Assistance\" = \"USER_PaymentAssist_Assistance_1\",\n         \"IH_PaymentAssist_SlidingScale\" = \"USER_PaymentAssist_SlidingScale_1\",\n         \"IH_Age_Adults\" = \"USER_Age_Adults_1\",\n         \"IH_FedQualified\" = \"USER_FedQualified_1\",\n         \n         \"Crisis_IH_FacilityName\" = \"USER_FacilityName_12\",\n         \"Crisis_IH_Setting_Inpatient\" = \"USER_Setting_Inpatient_12\",\n         \"Crisis_IH_Setting_Outpatient\" = \"USER_Setting_Outpatient_12\",\n         \"Crisis_IH_Setting_PartialHospital\" = \"USER_Setting_PartialHospital_12\",\n         \"Crisis_IH_Setting_Residential\" = \"USER_Setting_Residential_12\",\n         \"Crisis_IH_Setting_Tele\" = \"USER_Setting_Tele_12\",\n         \"Crisis_IH_Emer_CrisisIntervention\" = \"USER_Emer_CrisisIntervention_12\",\n         \"Crisis_IH_Emer_Walkins\" = \"USER_Emer_Walkins_12\",\n         \"Crisis_IH_Payment_Medicaid\" = \"USER_Payment_Medicaid_12\",\n         \"Crisis_IH_Payment_Medicare\" = \"USER_Payment_Medicare_12\",\n         \"Crisis_IH_Payment_VA\" = \"USER_Payment_VA_12\",\n         \"Crisis_IH_PaymentAssist_Assistance\" = \"USER_PaymentAssist_Assistance_12\",\n         \"Crisis_IH_PaymentAssist_SlidingScale\" = \"USER_PaymentAssist_SlidingScale_12\",\n         \"Crisis_IH_Age_Adults\" = \"USER_Age_Adults_12\",\n         \"Crisis_IH_FedQualified\" = \"USER_FedQualified_12\",\n         \n         \"Walkin_IH_FacilityName\" = \"USER_FacilityName_12_13\",\n         \"Walkin_IH_Setting_Inpatient\" = \"USER_Setting_Inpatient_12_13\",\n         \"Walkin_IH_Setting_Outpatient\" = \"USER_Setting_Outpatient_12_13\",\n         \"Walkin_IH_Setting_PartialHospital\" = \"USER_Setting_PartialHospital_12_13\",\n         \"Walkin_IH_Setting_Residential\" = \"USER_Setting_Residential_12_13\",\n         \"Walkin_IH_Setting_Tele\" = \"USER_Setting_Tele_12_13\",\n         \"Walkin_IH_Emer_CrisisIntervention\" = \"USER_Emer_CrisisIntervention_12_13\",\n         \"Walkin_IH_Emer_Walkins\" = \"USER_Emer_Walkins_12_13\",\n         \"Walkin_IH_Payment_Medicaid\" = \"USER_Payment_Medicaid_12_13\",\n         \"Walkin_IH_Payment_Medicare\" = \"USER_Payment_Medicare_12_13\",\n         \"Walkin_IH_Payment_VA\" = \"USER_Payment_VA_12_13\",\n         \"Walkin_IH_PaymentAssist_Assistance\" = \"USER_PaymentAssist_Assistance_12_13\",\n         \"Walkin_IH_PaymentAssist_SlidingScale\" = \"USER_PaymentAssist_SlidingScale_12_13\",\n         \"Walkin_IH_Age_Adults\" = \"USER_Age_Adults_12_13\",\n         \"Walkin_IH_FedQualified\" = \"USER_FedQualified_12_13\")\n\nMD_GIS$pctRural <- round(MD_GIS$pctRural, 2)\n\n## Print\nwrite.csv(MD_GIS, \"data/MD_GIS_clean.csv\", row.names=FALSE)\n  \n## Save data\nsaveRDS(MD_GIS, file = \"data/MD_GIS_01.RDS\")\n\n```\n\n\\newpage\n\n## Excel Formulas\n\n**Formula to test the accuracy of the imprisonment calculations:**\\\n`=IF(E2-D2=C2,TRUE,FALSE)`\n\n**Formula to calculate total population:**\\\n`=C2+D2`\n\n**Formula to test the accuracy of the imprisonment calculations:**\\\n`=IF(ROUND((C2/E2)*100000,0)=F2,TRUE,FALSE)`\n\n**Formula to calculate corrected imprisonment rates:**\\\n`=ROUND((C2/E2)*100000,0)`\n\n**Formula to parse out the facility name:**\\\n`=LEFT(A2, MIN(FIND(REGEXEXTRACT(A2, \"\\d\"),A2))-1)`\n\n**Formula to parse out the facility address:**\\\n`=REGEXEXTRACT(A2,\"[0-9]+ .+, [A-Z][a-z]+ [0-9]{5}\")`\n\n**Formula to create dummy variables for services codes:**\\\n`=COUNTIF(INDEX(data2!$A:$DC, MATCH(data!$B2, data2!$B:$B, 0), 0), data!D$1)`\n\n\\newpage\n\n## ArcGIS Pro Log\n\n**Export Table**\\\nInput Table - MD.csv\\\nOutput Table - MD_ExportTable\n\n**Export Table**\\\nInput Table - MD_counties.csv\\\nOutput Table - MD_counties_ExportTable\n\n**Export Table**\\\nInput Table - Facilities.csv\\\nOutput Table - Facilities_ExportTable\n\n**Geocode Addresses**\\\nInput Table - Facilities_ExportTable\\\nInput Address Locator - https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/Esri World Geocoder\\\nInput Address Fields - 'Single Line Input' Address VISIBLE NONE\\\nOutput Feature Class - Facilities_Geocode\\\nDynamic Output Feature Class - STATIC\\\nCountry - US\\\nPreferred Location Type - ADDRESS_LOCATION\\\nOutput Fields - ALL\n\n**Export Features**\\\nInput Features - `ACS Context for Emergency Response - Boundaries\\Tract`\\\nOutput Feature Class - ACS_Tract\n\n**Calculate Field**\\\nInput Table - ACS_Tract\\\nField Name - FIPS\\\nExpression - `!GEOID!*1`\\\nExpression Type - PYTHON3\n\n**Add Join**\\\nInput Table - ACS_Tract\\\nInput Join Field - FIPS\\\nJoin Table - MD_ExportTable\\\nJoin Table Field - FIPS\\\nKeep All Target Features - KEEP_ALL\\\nUpdated Input Layer or Table View - ACS_Tract_ExportFeatures\\\nIndex Joined Fields - NO_INDEX_JOIN_FIELDS\n\n**Export Features**\\\nInput Table - ACS_Tract\\\nOutput Table - MD\n\n**Project**\\\nInput Dataset or Feature Class - Facilities_Geocode\\\nOutput Dataset or Feature Class - Facilities_MDSP\\\nOutput Coordinate System - `PROJCS[\"NAD_1983_StatePlane_Maryland_FIPS_1900_Feet\",`\\\n`GEOGCS[\"GCS_North_American_1983\",DATUM[\"D_North_American_1983\",`\\\n`SPHEROID[\"GRS_1980\",6378137.0,298.257222101]],PRIMEM[\"Greenwich\",0.0],`\\\n`UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Lambert_Conformal_Conic\"],`\\\n`PARAMETER[\"False_Easting\",1312333.333333333],PARAMETER[\"False_Northing\",0.0],`\\\n`PARAMETER[\"Central_Meridian\",-77.0],PARAMETER[\"Standard_Parallel_1\",38.3],`\\\n`PARAMETER[\"Standard_Parallel_2\",39.45],PARAMETER[\"Latitude_Of_Origin\",37.66666666666666],`\\\n`UNIT[\"Foot_US\",0.3048006096012192]]`\\\nGeographic Transformation - NAD_1983_To_WGS_1984_1\\\nInput Coordinate System - `GEOGCS[\"GCS_WGS_1984\",DATUM[\"D_WGS_1984\",`\\\n`SPHEROID[\"WGS_1984\",6378137.0,298.257223563]],PRIMEM[\"Greenwich\",0.0],`\\\n`UNIT[\"Degree\",0.0174532925199433]]`\\\nPreserve Shape - NO_PRESERVE_SHAPE\\\nVertical - NO_VERTICAL\n\n**Project**\\\nInput Dataset or Feature Class - County Boundaries\\\nOutput Dataset or Feature Class - County_Boundaries_MDSP\\\nOutput Coordinate System - `PROJCS[\"NAD_1983_StatePlane_Maryland_FIPS_1900_Feet\",`\\\n`GEOGCS[\"GCS_North_American_1983\",DATUM[\"D_North_American_1983\",`\\\n`SPHEROID[\"GRS_1980\",6378137.0,298.257222101]],PRIMEM[\"Greenwich\",0.0],`\\\n`UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Lambert_Conformal_Conic\"],`\\\n`PARAMETER[\"False_Easting\",1312333.333333333],PARAMETER[\"False_Northing\",0.0],`\\\n`PARAMETER[\"Central_Meridian\",-77.0],PARAMETER[\"Standard_Parallel_1\",38.3],`\\\n`PARAMETER[\"Standard_Parallel_2\",39.45],PARAMETER[\"Latitude_Of_Origin\",37.66666666666666],`\\\n`UNIT[\"Foot_US\",0.3048006096012192]]`\\\nGeographic Transformation - NAD_1983_To_WGS_1984_1\\\nInput Coordinate System - `GEOGCS[\"GCS_WGS_1984\",DATUM[\"D_WGS_1984\",`\\\n`SPHEROID[\"WGS_1984\",6378137.0,298.257223563]],PRIMEM[\"Greenwich\",0.0],`\\\n`UNIT[\"Degree\",0.0174532925199433]]`\\\nPreserve Shape - NO_PRESERVE_SHAPE\\\nVertical - NO_VERTICAL\n\n**Project**\\\nInput Dataset or Feature Class - MD\\\nOutput Dataset or Feature Class - MD_MDSP\\\nOutput Coordinate System - `PROJCS[\"NAD_1983_StatePlane_Maryland_FIPS_1900_Feet\",`\\\n`GEOGCS[\"GCS_North_American_1983\",DATUM[\"D_North_American_1983\",`\\\n`SPHEROID[\"GRS_1980\",6378137.0,298.257222101]],PRIMEM[\"Greenwich\",0.0],`\\\n`UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Lambert_Conformal_Conic\"],`\\\n`PARAMETER[\"False_Easting\",1312333.333333333],PARAMETER[\"False_Northing\",0.0],`\\\n`PARAMETER[\"Central_Meridian\",-77.0],PARAMETER[\"Standard_Parallel_1\",38.3],`\\\n`PARAMETER[\"Standard_Parallel_2\",39.45],PARAMETER[\"Latitude_Of_Origin\",37.66666666666666],`\\\n`UNIT[\"Foot_US\",0.3048006096012192]]`\\\nGeographic Transformation - NAD_1983_To_WGS_1984_1\\\nInput Coordinate System - `GEOGCS[\"GCS_WGS_1984\",DATUM[\"D_WGS_1984\",`\\\n`SPHEROID[\"WGS_1984\",6378137.0,298.257223563]],PRIMEM[\"Greenwich\",0.0],`\\\n`UNIT[\"Degree\",0.0174532925199433]]` Preserve Shape - NO_PRESERVE_SHAPE\\\nVertical - NO_VERTICAL\n\n**Select Layer By Attribute**\\\nInput Rows - Facilities_MDSP\\\nSelection Type - NEW_SELECTION\\\nExpression - `USER_VeteransOnly = 0`\\\nUpdated Layer Or Table View - Facilities_MDSP\\\nCount - 230\n\n**Spatial Join**\\\nTarget Features - MD_MDSP\\\nJoin Features - Facilities_MDSP\\\nOutput Feature Class - MD_MHF\\\nJoin Operation - JOIN_ONE_TO_MANY\\\nKeep All Target Features - KEEP_ALL\\\nMatch Option - CLOSEST\\\nDistance Field Name - MHF_distance\n\n**Calculate Field**\\\nInput Table - MD_MHF\\\nField Name - MHF_miles\\\nExpression - `!MHF_distance! / 5280`\\\nExpression Type - PYTHON3\n\n**Select Layer By Attribute**\\\nInput Rows - Facilities_MDSP\\\nSelection Type - NEW_SELECTION\\\nExpression - `USER_VeteransOnly = 0 And USER_Setting_Inpatient = 1`\\\nUpdated Layer Or Table View - Facilities_MDSP\\\nCount - 20\n\n**Spatial Join**\\\nTarget Features - MD_MHF\\\nJoin Features - Facilities_MDSP\\\nOutput Feature Class - MD_MHF_IH\\\nJoin Operation - JOIN_ONE_TO_MANY\\\nKeep All Target Features - KEEP_ALL\\\nMatch Option - CLOSEST\\\nDistance Field Name - Inpatient_distance\n\n**Calculate Field**\\\nInput Table - MD_MHF_IH\\\nField Name - Inpatient_miles\\\nExpression - `!Inpatient_distance! / 5280`\\\nExpression Type - PYTHON3\n\n**Select Layer By Attribute**\\\nInput Rows - Facilities_MDSP\\\nSelection Type - NEW_SELECTION\\\nExpression - `USER_VeteransOnly = 0 And USER_Setting_Inpatient = 1 And USER_Emer_CrisisIntervention = 1`\\\nUpdated Layer Or Table View - Facilities_MDSP\\\nCount - 13\n\n**Spatial Join**\\\nTarget Features - MD_MHF_IH\\\nJoin Features - Facilities\\_\\_MDSP\\\nOutput Feature Class - MD_MHF_IH_Crisis\\\nJoin Operation - JOIN_ONE_TO_MANY\\\nKeep All Target Features - KEEP_ALL\\\nMatch Option - CLOSEST\\\nDistance Field Name - Crisis_distance\n\n**Calculate Field**\\\nInput Table - MD_MHF_IH_Crisis\\\nField Name - Crisis_miles\\\nExpression - `!Crisis_distance! / 5280`\\\nExpression Type - PYTHON3\n\n**Select Layer By Attribute**\\\nInput Rows - Facilities_MDSP\\\nSelection Type - NEW_SELECTION\\\nExpression - `USER_VeteransOnly = 0 And USER_Setting_Inpatient = 1 And USER_Emer_Walkins = 1`\\\nUpdated Layer Or Table View - Facilities_MDSP\\\nCount - 15\n\n**Spatial Join**\\\nTarget Features - MD_MHF_IH_Crisis\\\nJoin Features - Facilities_MDSP\\\nOutput Feature Class - MD_MHF_IH_Crisis_Walk\\\nJoin Operation - JOIN_ONE_TO_MANY\\\nKeep All Target Features - KEEP_ALL\\\nMatch Option - CLOSEST\\\nDistance Field Name - Walkin_distance\n\n**Calculate Field**\\\nInput Table - MD_MHF_IH_Crisis_Walk\\\nField Name - Walkin_miles\\\nExpression - `!Walkin_distance! / 5280`\\\nExpression Type - PYTHON3\n\n**Export Features**\\\nInput Features - MD_MHF_IH_Crisis_Walk\\\nOutput Feature Class - MD\\\nUse Field Alias as Name - NOT_USE_ALIAS\n\n**Export Table**\\\nInput Table - Urban_Rural.csv\\\nOutput Table - Urban_Rural_ExportTable\n\n**Calculate Field**\\\nInput Table - Urban_Rural_ExportTable\\\nField Name - FIPS\\\nExpression - `!GEO_ID![-11:]`\\\nExpression Type - PYTHON3\n\n**Add Join**\\\nInput Table - tl_2010_24_tract10\\\nInput Join Field - GEOID10\\\nJoin Table - Urban_Rural_ExportTable\\\nJoin Table Field - FIPS\\\nKeep All Target Features - KEEP_ALL\\\nUpdated Input Layer or Table View - tl_2010_24_tract10\\\nIndex Joined Field - INDEX_JOIN_FIELDS\n\n**Export Features**\\\nInput Features - tl_2010_24_tract10\\\nOutput Feature Class - Urban_Rural2010\\\nUse Field Alias as Name - NOT_USE_ALIAS\n\n**Apportion Polygon**\\\nInput Polygons - Urban_Rural2010\\\nFields to Apportion - H002001;H002002;H002005;H002006\\\nTarget Polygons - MD\\\nOutput Feature Class - MD_ApportionPoly\\\nApportion Method - AREA\\\nWeight Field - Total_Pop\\\nMaintain target geometry - MAINTAIN_GEOMETRIES\n\n**Calculate Field**\\\nInput Table - MD_ApportionPoly\\\nField Name - pctRural\\\nExpression - `(!H002005! / !H002001!) *100`\\\nExpression Type - PYTHON3\n\n**Select Layer By Attribute**\\\nInput Rows - Facilities_MDSP\\\nSelection Type - NEW_SELECTION\\\nExpression - `USER_VeteransOnly = 0 And USER_Setting_Inpatient = 1`\\\nUpdated Layer Or Table View - Facilities_MDSP\\\nCount - 20\n\n**Make OD Cost Matrix Analysis Layer**\\\nNetwork Data Source - https://www.arcgis.com/\\\nLayer Name - Urban Tracts to Inpatient\\\nTravel Mode - Driving Time\\\nNumber of Destinations to Find - 1 Time Zone - LOCAL_TIME_AT_LOCATIONS\\\nLine Shape - STRAIGHT_LINES\\\nNetwork Analyst Layer - Urban Tracts to Inpatient\\\nIgnore Invalid Locations at Solve Time - SKIP\n\n**Add Locations**\\\nInput Network Analysis Layer - Urban Tracts to Inpatient\\\nSub Layer - Origins\\\nInput Locations - MDurban_Points\\\nField Mappings - Name FIPS\\\nSearch Tolerance - 20000 Meters\\\nSearch Criteria - main.Routing_Streets SHAPE\\\nFind Closest among All Classes - MATCH_TO_CLOSEST\\\nAppend to Existing Locations - APPEND\\\nSnap to Network - NO_SNAP\\\nSnap Offset - 5 Meters\\\nExclude Restricted Portions of the Network - EXCLUDE\\\nUpdated Input Network Analysis Layer - Urban Tracts to Inpatient\\\nAllow automatic relocating at solve time - ALLOW\n\n**Add Locations**\\\nInput Network Analysis Layer - Urban Tracts to Inpatient\\\nSub Layer - Destinations\\\nInput Locations - Facilities_MDSP\\\nField Mappings - Name USER_FacilityName\\\nSearch Tolerance - 20000 Meters\\\nSearch Criteria - main.Routing_Streets SHAPE\\\nFind Closest among All Classes - MATCH_TO_CLOSEST\\\nAppend to Existing Locations - APPEND\\\nSnap to Network - NO_SNAP\\\nSnap Offset - 5 Meters\\\nExclude Restricted Portions of the Network - EXCLUDE\\\nUpdated Input Network Analysis Layer - Urban Tracts to Inpatient\\\nAllow automatic relocating at solve time - ALLOW\n\n**Solve**\\\nInput Network Analysis Layer - Urban Tracts to Inpatient\\\nIgnore Invalid Locations - SKIP\\\nTerminate on Solve Error - TERMINATE\\\nNetwork Analyst Layer - Urban Tracts to Inpatient\\\nSolve Succeeded - true\n\n**Export Features**\\\nInput Features - `Urban Tracts to Inpatient\\Lines`\\\nOutput Feature Class - Urban_Lines_Inpatient\\\nUse Field Alias as Name - NOT_USE_ALIAS\n\n**Calculate Field**\\\nInput Table - Urban_Lines_Inpatient\\\nField Name - FIPS\\\nExpression - `!Name![:11]`\\\nExpression Type - PYTHON3\n\n**Delete Identical**\\\nInput Dataset - Urban_Lines_Inpatient\\\nField(s) - FIPS\\\nXY Tolerance -\\\nZ Tolerance - 0\\\nUpdated Input Dataset - Urban_Lines_Inpatient\n\n**Make OD Cost Matrix Analysis Layer**\\\nNetwork Data Source - https://www.arcgis.com/\\\nLayer Name - Rural Tracts to Inpatient\\\nTravel Mode - Driving Time\\\nNumber of Destinations to Find - 1 Time Zone - LOCAL_TIME_AT_LOCATIONS\\\nLine Shape - STRAIGHT_LINES\\\nNetwork Analyst Layer - Rural Tracts to Inpatient\\\nIgnore Invalid Locations at Solve Time - SKIP\n\n**Add Locations**\\\nInput Network Analysis Layer - Rural Tracts to Inpatient\\\nSub Layer - Origins\\\nInput Locations - MDrural_Points\\\nField Mappings - Name FIPS\\\nSearch Tolerance - 20000 Meters\\\nSearch Criteria - main.Routing_Streets SHAPE\\\nFind Closest among All Classes - MATCH_TO_CLOSEST\\\nAppend to Existing Locations - APPEND\\\nSnap to Network - NO_SNAP\\\nSnap Offset - 5 Meters\\\nExclude Restricted Portions of the Network - EXCLUDE\\\nUpdated Input Network Analysis Layer - Rural Tracts to Inpatient\\\nAllow automatic relocating at solve time - ALLOW\n\n**Add Locations**\\\nInput Network Analysis Layer - Rural Tracts to Inpatient\\\nSub Layer - Destinations\\\nInput Locations - Facilities_MDSP\\\nField Mappings - Name USER_FacilityName\\\nSearch Tolerance - 20000 Meters\\\nSearch Criteria - main.Routing_Streets SHAPE\\\nFind Closest among All Classes - MATCH_TO_CLOSEST\\\nAppend to Existing Locations - APPEND\\\nSnap to Network - NO_SNAP\\\nSnap Offset - 5 Meters\\\nExclude Restricted Portions of the Network - EXCLUDE\\\nUpdated Input Network Analysis Layer - Rural Tracts to Inpatient\\\nAllow automatic relocating at solve time - ALLOW\n\n**Solve**\\\nInput Network Analysis Layer - Rural Tracts to Inpatient\\\nIgnore Invalid Locations - SKIP\\\nTerminate on Solve Error - TERMINATE\\\nNetwork Analyst Layer - Rural Tracts to Inpatient\\\nSolve Succeeded - true\n\n**Export Features**\\\nInput Features - `Rural Tracts to Inpatient\\Lines`\\\nOutput Feature Class - Rural_Lines_Inpatient\\\nUse Field Alias as Name - NOT_USE_ALIAS\n\n**Calculate Field**\\\nInput Table - Rural_Lines_Inpatient\\\nField Name - FIPS\\\nExpression - `!Name![:11]`\\\nExpression Type - PYTHON3\n\n**Delete Identical**\\\nInput Dataset - Rural_Lines_Inpatient\\\nField(s) - FIPS\\\nXY Tolerance -\\\nZ Tolerance - 0\\\nUpdated Input Dataset - Rural_Lines_Inpatient\n\n**Append**\\\nInput Datasets - Rural_Lines_Inpatient\\\nTarget Dataset - Urban_Lines_Inpatient\\\nField Matching Type - TEST\\\nUpdated Target Dataset - Urban_Lines_Inpatient\n\n**Join Field**\\\nInput Table - MD_ApportionPoly\\\nInput Join Field - GEOID\\\nJoin Table - Urban_Lines_Inpatient\\\nJoin Table Field - FIPS\\\nTransfer Fields - Name;Total_TravelTime;Total_Miles\\\nUpdated Input Table - MD_ApportionPoly\\\nTransfer Method - NOT_USE_FM\n\n**Select Layer By Attribute**\\\nInput Rows - Facilities_MDSP\\\nSelection Type - NEW_SELECTION\\\nExpression - `USER_VeteransOnly = 0 And USER_Setting_Inpatient = 1 And USER_Emer_CrisisIntervention = 1`\\\nUpdated Layer Or Table View - Facilities_MDSP\\\nCount - 13\n\n**Make OD Cost Matrix Analysis Layer**\\\nNetwork Data Source - https://www.arcgis.com/\\\nLayer Name - Urban Tracts to Crisis\\\nTravel Mode - Driving Time\\\nNumber of Destinations to Find - 1 Time Zone - LOCAL_TIME_AT_LOCATIONS\\\nLine Shape - STRAIGHT_LINES\\\nNetwork Analyst Layer - Urban Tracts to Crisis\\\nIgnore Invalid Locations at Solve Time - SKIP\n\n**Add Locations**\\\nInput Network Analysis Layer - Urban Tracts to Crisis\\\nSub Layer - Origins\\\nInput Locations - MDurban_Points\\\nField Mappings - Name FIPS\\\nSearch Tolerance - 20000 Meters\\\nSearch Criteria - main.Routing_Streets SHAPE\\\nFind Closest among All Classes - MATCH_TO_CLOSEST\\\nAppend to Existing Locations - APPEND\\\nSnap to Network - NO_SNAP\\\nSnap Offset - 5 Meters\\\nExclude Restricted Portions of the Network - EXCLUDE\\\nUpdated Input Network Analysis Layer - Urban Tracts to Crisis\\\nAllow automatic relocating at solve time - ALLOW\n\n**Add Locations**\\\nInput Network Analysis Layer - Urban Tracts to Crisis\\\nSub Layer - Destinations\\\nInput Locations - Facilities_MDSP\\\nField Mappings - Name USER_FacilityName\\\nSearch Tolerance - 20000 Meters\\\nSearch Criteria - main.Routing_Streets SHAPE\\\nFind Closest among All Classes - MATCH_TO_CLOSEST\\\nAppend to Existing Locations - APPEND\\\nSnap to Network - NO_SNAP\\\nSnap Offset - 5 Meters\\\nExclude Restricted Portions of the Network - EXCLUDE\\\nUpdated Input Network Analysis Layer - Urban Tracts to Crisis\\\nAllow automatic relocating at solve time - ALLOW\n\n**Solve**\\\nInput Network Analysis Layer - Urban Tracts to Crisis\\\nIgnore Invalid Locations - SKIP\\\nTerminate on Solve Error - TERMINATE\\\nNetwork Analyst Layer - Urban Tracts to Crisis\\\nSolve Succeeded - true\n\n**Export Features**\\\nInput Features - `Urban Tracts to Crisis\\Lines`\\\nOutput Feature Class - Urban_Lines_Crisis\\\nUse Field Alias as Name - NOT_USE_ALIAS\n\n**Calculate Field**\\\nInput Table - Urban_Lines_Crisis\\\nField Name - FIPS\\\nExpression - `!Name![:11]`\\\nExpression Type - PYTHON3\n\n**Delete Identical**\\\nInput Dataset - Urban_Lines_Crisis\\\nField(s) - FIPS\\\nXY Tolerance -\\\nZ Tolerance - 0\\\nUpdated Input Dataset - Urban_Lines_Crisis\n\n**Make OD Cost Matrix Analysis Layer**\\\nNetwork Data Source - https://www.arcgis.com/\\\nLayer Name - Rural Tracts to Crisis\\\nTravel Mode - Driving Time\\\nNumber of Destinations to Find - 1 Time Zone - LOCAL_TIME_AT_LOCATIONS\\\nLine Shape - STRAIGHT_LINES\\\nNetwork Analyst Layer - Rural Tracts to Crisis\\\nIgnore Invalid Locations at Solve Time - SKIP\n\n**Add Locations**\\\nInput Network Analysis Layer - Rural Tracts to Crisis\\\nSub Layer - Origins\\\nInput Locations - MDrural_Points\\\nField Mappings - Name FIPS\\\nSearch Tolerance - 20000 Meters\\\nSearch Criteria - main.Routing_Streets SHAPE\\\nFind Closest among All Classes - MATCH_TO_CLOSEST\\\nAppend to Existing Locations - APPEND\\\nSnap to Network - NO_SNAP\\\nSnap Offset - 5 Meters\\\nExclude Restricted Portions of the Network - EXCLUDE\\\nUpdated Input Network Analysis Layer - Rural Tracts to Crisis\\\nAllow automatic relocating at solve time - ALLOW\n\n**Add Locations**\\\nInput Network Analysis Layer - Rural Tracts to Crisis\\\nSub Layer - Destinations\\\nInput Locations - Facilities_MDSP\\\nField Mappings - Name USER_FacilityName\\\nSearch Tolerance - 20000 Meters\\\nSearch Criteria - main.Routing_Streets SHAPE\\\nFind Closest among All Classes - MATCH_TO_CLOSEST\\\nAppend to Existing Locations - APPEND\\\nSnap to Network - NO_SNAP\\\nSnap Offset - 5 Meters\\\nExclude Restricted Portions of the Network - EXCLUDE\\\nUpdated Input Network Analysis Layer - Rural Tracts to Crisis\\\nAllow automatic relocating at solve time - ALLOW\n\n**Solve**\\\nInput Network Analysis Layer - Rural Tracts to Crisis\\\nIgnore Invalid Locations - SKIP\\\nTerminate on Solve Error - TERMINATE\\\nNetwork Analyst Layer - Rural Tracts to Crisis\\\nSolve Succeeded - true\n\n**Export Features**\\\nInput Features - `Rural Tracts to Crisis\\Lines`\\\nOutput Feature Class - Rural_Lines_Crisis\\\nUse Field Alias as Name - NOT_USE_ALIAS\n\n**Calculate Field**\\\nInput Table - Rural_Lines_Crisis\\\nField Name - FIPS\\\nExpression - `!Name![:11]`\\\nExpression Type - PYTHON3\n\n**Delete Identical**\\\nInput Dataset - Rural_Lines_Crisis\\\nField(s) - FIPS\\\nXY Tolerance -\\\nZ Tolerance - 0\\\nUpdated Input Dataset - Rural_Lines_Crisis\n\n**Append**\\\nInput Datasets - Rural_Lines_Crisis\\\nTarget Dataset - Urban_Lines_Crisis\\\nField Matching Type - TEST\\\nUpdated Target Dataset - Urban_Lines_Crisis\n\n**Join Field**\\\nInput Table - MD_ApportionPoly\\\nInput Join Field - GEOID\\\nJoin Table - Urban_Lines_Crisis\\\nJoin Table Field - FIPS\\\nTransfer Fields - Name;Total_TravelTime;Total_Miles\\\nUpdated Input Table - MD_ApportionPoly\\\nTransfer Method - NOT_USE_FM\n\n**Select Layer By Attribute**\\\nInput Rows - Facilities_MDSP\\\nSelection Type - NEW_SELECTION\\\nExpression - `USER_VeteransOnly = 0`\\\nUpdated Layer Or Table View - Facilities_MDSP\\\nCount - 230\n\n**Make OD Cost Matrix Analysis Layer**\\\nNetwork Data Source - https://www.arcgis.com/\\\nLayer Name - Urban Tracts to MHF\\\nTravel Mode - Driving Time\\\nNumber of Destinations to Find - 1 Time Zone - LOCAL_TIME_AT_LOCATIONS\\\nLine Shape - STRAIGHT_LINES\\\nNetwork Analyst Layer - Urban Tracts to MHF\\\nIgnore Invalid Locations at Solve Time - SKIP\n\n**Add Locations**\\\nInput Network Analysis Layer - Urban Tracts to MHF\\\nSub Layer - Origins\\\nInput Locations - MDurban_Points\\\nField Mappings - Name FIPS\\\nSearch Tolerance - 20000 Meters\\\nSearch Criteria - main.Routing_Streets SHAPE\\\nFind Closest among All Classes - MATCH_TO_CLOSEST\\\nAppend to Existing Locations - APPEND\\\nSnap to Network - NO_SNAP\\\nSnap Offset - 5 Meters\\\nExclude Restricted Portions of the Network - EXCLUDE\\\nUpdated Input Network Analysis Layer - Urban Tracts to MHF\\\nAllow automatic relocating at solve time - ALLOW\n\n**Add Locations**\\\nInput Network Analysis Layer - Urban Tracts to MHF\\\nSub Layer - Destinations\\\nInput Locations - Facilities_MDSP\\\nField Mappings - Name USER_FacilityName\\\nSearch Tolerance - 20000 Meters\\\nSearch Criteria - main.Routing_Streets SHAPE\\\nFind Closest among All Classes - MATCH_TO_CLOSEST\\\nAppend to Existing Locations - APPEND\\\nSnap to Network - NO_SNAP\\\nSnap Offset - 5 Meters\\\nExclude Restricted Portions of the Network - EXCLUDE\\\nUpdated Input Network Analysis Layer - Urban Tracts to MHF\\\nAllow automatic relocating at solve time - ALLOW\n\n**Solve**\\\nInput Network Analysis Layer - Urban Tracts to MHF\\\nIgnore Invalid Locations - SKIP\\\nTerminate on Solve Error - TERMINATE\\\nNetwork Analyst Layer - Urban Tracts to MHF\\\nSolve Succeeded - true\n\n**Export Features**\\\nInput Features - `Urban Tracts to MHF\\Lines`\\\nOutput Feature Class - Urban_Lines_MHF\\\nUse Field Alias as Name - NOT_USE_ALIAS\n\n**Calculate Field**\\\nInput Table - Urban_Lines_MHF\\\nField Name - FIPS\\\nExpression - `!Name![:11]`\\\nExpression Type - PYTHON3\n\n**Delete Identical**\\\nInput Dataset - Urban_Lines_MHF\\\nField(s) - FIPS\\\nXY Tolerance -\\\nZ Tolerance - 0\\\nUpdated Input Dataset - Urban_Lines_MHF\n\n**Make OD Cost Matrix Analysis Layer**\\\nNetwork Data Source - https://www.arcgis.com/\\\nLayer Name - Rural Tracts to MHF\\\nTravel Mode - Driving Time\\\nNumber of Destinations to Find - 1 Time Zone - LOCAL_TIME_AT_LOCATIONS\\\nLine Shape - STRAIGHT_LINES\\\nNetwork Analyst Layer - Rural Tracts to MHF\\\nIgnore Invalid Locations at Solve Time - SKIP\n\n**Add Locations**\\\nInput Network Analysis Layer - Rural Tracts to MHF\\\nSub Layer - Origins\\\nInput Locations - MDrural_Points\\\nField Mappings - Name FIPS\\\nSearch Tolerance - 20000 Meters\\\nSearch Criteria - main.Routing_Streets SHAPE\\\nFind Closest among All Classes - MATCH_TO_CLOSEST\\\nAppend to Existing Locations - APPEND\\\nSnap to Network - NO_SNAP\\\nSnap Offset - 5 Meters\\\nExclude Restricted Portions of the Network - EXCLUDE\\\nUpdated Input Network Analysis Layer - Rural Tracts to MHF\\\nAllow automatic relocating at solve time - ALLOW\n\n**Add Locations**\\\nInput Network Analysis Layer - Rural Tracts to MHF\\\nSub Layer - Destinations\\\nInput Locations - Facilities_MDSP\\\nField Mappings - Name USER_FacilityName\\\nSearch Tolerance - 20000 Meters\\\nSearch Criteria - main.Routing_Streets SHAPE\\\nFind Closest among All Classes - MATCH_TO_CLOSEST\\\nAppend to Existing Locations - APPEND\\\nSnap to Network - NO_SNAP\\\nSnap Offset - 5 Meters\\\nExclude Restricted Portions of the Network - EXCLUDE\\\nUpdated Input Network Analysis Layer - Rural Tracts to MHF\\\nAllow automatic relocating at solve time - ALLOW\n\n**Solve**\\\nInput Network Analysis Layer - Rural Tracts to MHF\\\nIgnore Invalid Locations - SKIP\\\nTerminate on Solve Error - TERMINATE\\\nNetwork Analyst Layer - Rural Tracts to MHF\\\nSolve Succeeded - true\n\n**Export Features**\\\nInput Features - `Rural Tracts to MHF\\Lines`\\\nOutput Feature Class - Rural_Lines_MHF\\\nUse Field Alias as Name - NOT_USE_ALIAS\n\n**Calculate Field**\\\nInput Table - Rural_Lines_MHF\\\nField Name - FIPS\\\nExpression - `!Name![:11]`\\\nExpression Type - PYTHON3\n\n**Delete Identical**\\\nInput Dataset - Rural_Lines_MHF\\\nField(s) - FIPS\\\nXY Tolerance -\\\nZ Tolerance - 0\\\nUpdated Input Dataset - Rural_Lines_MHF\n\n**Append**\\\nInput Datasets - Rural_Lines_MHF\\\nTarget Dataset - Urban_Lines_MHF\\\nField Matching Type - TEST\\\nUpdated Target Dataset - Urban_Lines_MHF\n\n**Join Field**\\\nInput Table - MD_ApportionPoly\\\nInput Join Field - GEOID\\\nJoin Table - Urban_Lines_Walkin\\\nJoin Table Field - FIPS\\\nTransfer Fields - Name;Total_TravelTime;Total_Miles\\\nUpdated Input Table - MD_ApportionPoly\\\nTransfer Method - NOT_USE_FM\n\n**Select Layer By Attribute**\\\nInput Rows - Facilities_MDSP\\\nSelection Type - NEW_SELECTION\\\nExpression - `USER_VeteransOnly = 0 And USER_Setting_Inpatient = 1 And USER_Emer_Walkins = 1`\\\nUpdated Layer Or Table View - Facilities_MDSP\\\nCount - 15\n\n**Make OD Cost Matrix Analysis Layer**\\\nNetwork Data Source - https://www.arcgis.com/\\\nLayer Name - Urban Tracts to Walkin\\\nTravel Mode - Driving Time\\\nNumber of Destinations to Find - 1 Time Zone - LOCAL_TIME_AT_LOCATIONS\\\nLine Shape - STRAIGHT_LINES\\\nNetwork Analyst Layer - Urban Tracts to Walkin\\\nIgnore Invalid Locations at Solve Time - SKIP\n\n**Add Locations**\\\nInput Network Analysis Layer - Urban Tracts to Walkin\\\nSub Layer - Origins\\\nInput Locations - MDurban_Points\\\nField Mappings - Name FIPS\\\nSearch Tolerance - 20000 Meters\\\nSearch Criteria - main.Routing_Streets SHAPE\\\nFind Closest among All Classes - MATCH_TO_CLOSEST\\\nAppend to Existing Locations - APPEND\\\nSnap to Network - NO_SNAP\\\nSnap Offset - 5 Meters\\\nExclude Restricted Portions of the Network - EXCLUDE\\\nUpdated Input Network Analysis Layer - Urban Tracts to Walkin\\\nAllow automatic relocating at solve time - ALLOW\n\n**Add Locations**\\\nInput Network Analysis Layer - Urban Tracts to Walkin\\\nSub Layer - Destinations\\\nInput Locations - Facilities_MDSP\\\nField Mappings - Name USER_FacilityName\\\nSearch Tolerance - 20000 Meters\\\nSearch Criteria - main.Routing_Streets SHAPE\\\nFind Closest among All Classes - MATCH_TO_CLOSEST\\\nAppend to Existing Locations - APPEND\\\nSnap to Network - NO_SNAP\\\nSnap Offset - 5 Meters\\\nExclude Restricted Portions of the Network - EXCLUDE\\\nUpdated Input Network Analysis Layer - Urban Tracts to Walkin\\\nAllow automatic relocating at solve time - ALLOW\n\n**Solve**\\\nInput Network Analysis Layer - Urban Tracts to Walkin\\\nIgnore Invalid Locations - SKIP\\\nTerminate on Solve Error - TERMINATE\\\nNetwork Analyst Layer - Urban Tracts to Walkin\\\nSolve Succeeded - true\n\n**Export Features**\\\nInput Features - `Urban Tracts to Walkin\\Lines`\\\nOutput Feature Class - Urban_Lines_Walkin\\\nUse Field Alias as Name - NOT_USE_ALIAS\n\n**Calculate Field**\\\nInput Table - Urban_Lines_Walkin\\\nField Name - FIPS\\\nExpression - `!Name![:11]`\\\nExpression Type - PYTHON3\n\n**Delete Identical**\\\nInput Dataset - Urban_Lines_Walkin\\\nField(s) - FIPS\\\nXY Tolerance -\\\nZ Tolerance - 0\\\nUpdated Input Dataset - Urban_Lines_Walkin\n\n**Make OD Cost Matrix Analysis Layer**\\\nNetwork Data Source - https://www.arcgis.com/\\\nLayer Name - Rural Tracts to Walkin\\\nTravel Mode - Driving Time\\\nNumber of Destinations to Find - 1 Time Zone - LOCAL_TIME_AT_LOCATIONS\\\nLine Shape - STRAIGHT_LINES\\\nNetwork Analyst Layer - Rural Tracts to Walkin\\\nIgnore Invalid Locations at Solve Time - SKIP\n\n**Add Locations**\\\nInput Network Analysis Layer - Rural Tracts to Walkin\\\nSub Layer - Origins\\\nInput Locations - MDrural_Points\\\nField Mappings - Name FIPS\\\nSearch Tolerance - 20000 Meters\\\nSearch Criteria - main.Routing_Streets SHAPE\\\nFind Closest among All Classes - MATCH_TO_CLOSEST\\\nAppend to Existing Locations - APPEND\\\nSnap to Network - NO_SNAP\\\nSnap Offset - 5 Meters\\\nExclude Restricted Portions of the Network - EXCLUDE\\\nUpdated Input Network Analysis Layer - Rural Tracts to Walkin\\\nAllow automatic relocating at solve time - ALLOW\n\n**Add Locations**\\\nInput Network Analysis Layer - Rural Tracts to Walkin\\\nSub Layer - Destinations\\\nInput Locations - Facilities_MDSP\\\nField Mappings - Name USER_FacilityName\\\nSearch Tolerance - 20000 Meters\\\nSearch Criteria - main.Routing_Streets SHAPE\\\nFind Closest among All Classes - MATCH_TO_CLOSEST\\\nAppend to Existing Locations - APPEND\\\nSnap to Network - NO_SNAP\\\nSnap Offset - 5 Meters\\\nExclude Restricted Portions of the Network - EXCLUDE\\\nUpdated Input Network Analysis Layer - Rural Tracts to Walkin\\\nAllow automatic relocating at solve time - ALLOW\n\n**Solve**\\\nInput Network Analysis Layer - Rural Tracts to Walkin\\\nIgnore Invalid Locations - SKIP\\\nTerminate on Solve Error - TERMINATE\\\nNetwork Analyst Layer - Rural Tracts to Walkin\\\nSolve Succeeded - true\n\n**Export Features**\\\nInput Features - `Rural Tracts to Walkin\\Lines`\\\nOutput Feature Class - Rural_Lines_Walkin\\\nUse Field Alias as Name - NOT_USE_ALIAS\n\n**Calculate Field**\\\nInput Table - Rural_Lines_Walkin\\\nField Name - FIPS\\\nExpression - `!Name![:11]`\\\nExpression Type - PYTHON3\n\n**Delete Identical**\\\nInput Dataset - Rural_Lines_Walkin\\\nField(s) - FIPS\\\nXY Tolerance -\\\nZ Tolerance - 0\\\nUpdated Input Dataset - Rural_Lines_Walkin\n\n**Append**\\\nInput Datasets - Rural_Lines_Walkin\\\nTarget Dataset - Urban_Lines_Walkin\\\nField Matching Type - TEST\\\nUpdated Target Dataset - Urban_Lines_Walkin\n\n**Join Field**\\\nInput Table - MD_ApportionPoly\\\nInput Join Field - GEOID\\\nJoin Table - Urban_Lines_Walkin\\\nJoin Table Field - FIPS\\\nTransfer Fields - Name;Total_TravelTime;Total_Miles\\\nUpdated Input Table - MD_ApportionPoly\\\nTransfer Method - NOT_USE_FM\n\n**Export Table**\\\nInput Table - MD_ApportionPoly\\\nOutput Table - MD_GIS\\\nUse Field Alias as Name - NOT_USE_ALIAS\n\n\\newpage\n\n# References\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"center","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"output-file":"Geography_of_Mass_Incarceration.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.2.335","editor":"visual","theme":"../custom.scss","title":"Prisoners of a Broken System","subtitle":"Investigating the Relationship Between High Imprisonment Rates and Access to Inpatient Mental Health Care in Maryland","author":"Jamie Pantazi Esmond","date":"today","date-format":"long","bibliography":["Geography_of_Mass_Incarceration.bib"],"csl":"https://raw.githubusercontent.com/citation-style-language/styles/master/apa.csl","fig-cap-location":"top","tbl-cap-location":"top","title-block-banner":true,"title-block-banner-color":"#744FC6"},"extensions":{"book":{"multiFile":true}}}}}